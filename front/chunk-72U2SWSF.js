import{a as Ee}from"./chunk-Y64AYFHZ.js";import{h as I}from"./chunk-NFMIVN66.js";import{a as ve,b as ge,c as Ce,d as Se}from"./chunk-AICVXWQ6.js";import{a as be}from"./chunk-I3SZ5FME.js";import{a as _e}from"./chunk-HYOWEGV7.js";import{a as xe}from"./chunk-3HEW5RTP.js";import{a as ue,b as pe}from"./chunk-UKCOEVIY.js";import{a as fe,d as he}from"./chunk-HDKAZCIU.js";import{$b as T,C as j,Ca as E,Ea as h,F as G,Fa as p,I as q,Ka as A,La as H,Ma as J,Na as K,Nb as te,O as _,Oa as o,P as b,Pa as c,Pb as u,Qb as M,Ra as X,Rb as ie,Sb as ae,Tb as oe,Ua as k,Va as F,Vb as re,W,Wa as N,Wb as ne,Xa as Y,Xb as le,Ya as P,Yb as se,Zb as de,_b as me,ac as ce,ca as s,cb as R,da as f,eb as D,l as B,la as C,na as S,rb as Z,sa as g,sb as $,ta as z,ua as Q,va as U,vb as ee,wa as t,xa as a,ya as x}from"./chunk-OWJSVT4P.js";var y=ue.url,w="policiais-requeridas",L=(()=>{let n=class n{constructor(e){this.http=e}index(){return this.http.get(`${y}/${w}`)}find(e){return this.http.get(`${y}/${w}/${e}`)}create(e){return this.http.post(`${y}/${w}`,e)}update(e,i){return this.http.put(`${y}/${w}/${e}`,i)}remove(e){return this.http.delete(`${y}/${w}/${e}`)}};n.\u0275fac=function(i){return new(i||n)(G(ee))},n.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"});let r=n;return r})();var O=(()=>{let n=class n{constructor(e,i,l,m){this.formBuilder=e,this.policiaisRequeridasService=i,this.policiaisService=l,this.toastr=m,this.refresh=new W}ngOnInit(){this.form=this.formBuilder.group({id:[null],policial:[null,u.compose([u.required])],nup:[null,u.compose([u.maxLength(50)])],data:[null,u.compose([u.required])],boletim_entrada:[null,u.compose([u.maxLength(40)])],boletim_publicacao:[null,u.compose([u.maxLength(40)])]}),this.subscription=this.policiaisService.disponiveis().subscribe({next:e=>{e.forEach(i=>{i.numeral?i.nome=`${i.graduacao.abreviatura} ${i.numeral} ${i.nome_guerra}, ${i.matricula}`:i.nome=`${i.graduacao.abreviatura} ${i.nome_guerra}, ${i.matricula}`}),this.policiais$=B(e)}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cadastrar(){this.form.value.boletim_publicacao||this.form.get("boletim_publicacao")?.patchValue(null),this.form.value.id?this.policiaisRequeridasService.update(this.form.value.id,this.form.value).subscribe({next:e=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:e=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.policiaisRequeridasService.create(this.form.value).subscribe({next:e=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:e=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}editar(e){this.form.patchValue(e),this.form.get("policial")?.patchValue(e.policial.id)}};n.\u0275fac=function(i){return new(i||n)(f(me),f(L),f(Ee),f(I))},n.\u0275cmp=q({type:n,selectors:[["app-policiais-requeridas-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[P],decls:12,vars:3,consts:[[3,"formGroup"],[1,"row"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-4",3,"data$"],["formControlName","data","label","Data","id","data","tipo","date",1,"col-sm-2"],["formControlName","nup","label","NUP","id","nup","tipo","text",1,"col-sm-2"],["formControlName","boletim_entrada","label","Boletim Entrada","id","boletim_entrada","tipo","text",1,"col-sm-2"],["formControlName","boletim_publicacao","label","Boletim Publica\xE7\xE3o","id","boletim_publicacao","tipo","text",1,"col-sm-2"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"]],template:function(i,l){i&1&&(t(0,"form",0)(1,"div",1),x(2,"input-select",2)(3,"input-text",3)(4,"input-text",4)(5,"input-text",5)(6,"input-text",6),a(),t(7,"div",7)(8,"a",8),h("click",function(){return l.form.reset()}),o(9,"Cancelar"),a(),t(10,"button",9),h("click",function(){return l.cadastrar()}),o(11,"Cadastrar"),a()()()),i&2&&(S("formGroup",l.form),s(2),S("data$",l.policiais$),s(8),S("disabled",l.form.invalid))},dependencies:[$,T,oe,M,ie,ce,re,ne,_e,be]});let r=n;return r})();function Re(r,n){r&1&&(t(0,"button",7),x(1,"i",41),a())}function De(r,n){if(r&1&&(o(0),R(1,"mask")),r&2){let d=p().$implicit;c(D(1,1,d.policial.numeral,"00.000"))}}function $e(r,n){if(r&1){let d=E();t(0,"a",45),h("click",function(){_(d);let i=p().$implicit,l=p(2);return b(l.editar(i))}),x(1,"i",46),a()}}function Me(r,n){if(r&1){let d=E();t(0,"a",47),h("click",function(){_(d);let i=p().$implicit,l=p(2);return b(l.delete(i))}),x(1,"i",48),a()}}function Te(r,n){if(r&1&&(t(0,"tr",42)(1,"td"),o(2),a(),t(3,"td"),o(4),a(),t(5,"td"),o(6),a(),t(7,"td"),C(8,De,2,4),a(),t(9,"td"),o(10),a(),t(11,"td"),o(12),R(13,"mask"),a(),t(14,"td"),o(15),R(16,"date"),a(),t(17,"td"),o(18),a(),t(19,"td"),o(20),a(),t(21,"td"),o(22),a(),t(23,"td"),C(24,$e,2,0,"a",43)(25,Me,2,0,"a",44),a()()),r&2){let d=n.$implicit,e=p(2);s(2),c(d.id),s(2),X("",d.policial.setor.subunidade.abreviatura," - ",d.policial.setor.subunidade.unidade.abreviatura,""),s(2),c(d.policial.graduacao.nome),s(2),g(8,d.policial.numeral?8:-1),s(2),c(d.policial.nome_guerra),s(2),c(D(13,13,d.policial.matricula,"000.000-0-A")),s(3),c(D(16,16,d.data,"dd/MM/yyyy")),s(3),c(d.nup),s(2),c(d.boletim_entrada),s(2),c(d.boletim_publicacao),s(2),g(24,e.user.perfil.policiais_requeridas_edt?24:-1),s(),g(25,e.user.perfil.policiais_requeridas_del?25:-1)}}function Ie(r,n){r&1&&(t(0,"tr")(1,"td",28),o(2,"Sem informa\xE7\xE3o"),a()())}function Le(r,n){if(r&1&&(t(0,"tbody"),Q(1,Te,26,19,"tr",42,z,!1,Ie,3,0,"tr"),a()),r&2){p();let d=K(21);s(),U(d.data)}}function Ve(r,n){if(r&1){let d=E();o(0," Tem certeza que deseja excluir: "),t(1,"b"),o(2),a(),t(3,"div",49)(4,"a",50),o(5,"Cancelar"),a(),t(6,"button",51),h("click",function(){_(d);let i=p();return b(i.confirm())}),o(7," Excluir "),a()()}if(r&2){let d=p();s(2),c(d.excluir.policial.nome)}}var ot=(()=>{let n=class n{constructor(e,i,l){this.PoliciaisRequeridasService=e,this.toastr=i,this.sessionService=l,this.quant=10}ngOnInit(){this.user=this.sessionService.getUser(),this.sessionService.checkPermission("policiais_requeridas"),this.subscription=this.PoliciaisRequeridasService.index().subscribe({next:e=>{this.data$=e,this.temp=e}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.PoliciaisRequeridasService.index().subscribe({next:e=>{this.data$=e}})}editar(e){this.child.editar(e)}delete(e){this.excluir=e}confirm(){this.PoliciaisRequeridasService.remove(this.excluir.id||0).subscribe({next:e=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:e=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var e=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(i=>i.policial.numeral?i.policial.numeral?.toLocaleLowerCase().indexOf(e)!==-1||i.policial.nome.toLocaleLowerCase().indexOf(e)!==-1||i.policial.nome_guerra.toLocaleLowerCase().indexOf(e)!==-1||i.policial.matricula.toLocaleLowerCase().indexOf(e)!==-1||i.policial.graduacao.nome.toLocaleLowerCase().indexOf(e)!==-1||!e:i.policial.nome.toLocaleLowerCase().indexOf(e)!==-1||i.policial.nome_guerra.toLocaleLowerCase().indexOf(e)!==-1||i.policial.matricula.toLocaleLowerCase().indexOf(e)!==-1||i.policial.graduacao.nome.toLocaleLowerCase().indexOf(e)!==-1||!e)}}};n.\u0275fac=function(i){return new(i||n)(f(L),f(I),f(pe))},n.\u0275cmp=q({type:n,selectors:[["app-policiais-requeridas"]],viewQuery:function(i,l){if(i&1&&A(O,5),i&2){let m;H(m=J())&&(l.child=m.first)}},standalone:!0,features:[Y([fe()]),P],decls:84,vars:9,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Requeridas"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage","mfSortBy","mfSortOrder"],["by","id"],["by","policial.setor.subunidade.abreviatura"],["by","policial.graduacao.nome"],["by","policial.numeral"],["by","policial.nome_guerra"],["by","policial.matricula"],["by","data"],["by","nup"],["by","boletim_entrada"],["by","boletim_publicacao"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"refresh"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"fa","fa-plus"],[1,"optionshover"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","ml-1"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(i,l){if(i&1){let m=E();t(0,"div",1),x(1,"app-title",2),t(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6),C(6,Re,2,0,"button",7),a(),t(7,"div",8)(8,"div",9)(9,"select",10),N("ngModelChange",function(v){return _(m),F(l.quant,v)||(l.quant=v),b(v)}),t(10,"option",11),o(11,"10"),a(),t(12,"option",12),o(13,"25"),a(),t(14,"option",13),o(15,"50"),a(),t(16,"option",14),o(17,"100"),a()(),t(18,"input",15),N("ngModelChange",function(v){return _(m),F(l.pesquisa,v)||(l.pesquisa=v),b(v)}),h("ngModelChange",function(){return _(m),b(l.pesquisar())}),a()()()(),t(19,"div",16)(20,"table",17,0)(22,"thead")(23,"tr")(24,"th")(25,"mfDefaultSorter",18),o(26,"#"),a()(),t(27,"th")(28,"mfDefaultSorter",19),o(29,"Subunidade"),a()(),t(30,"th")(31,"mfDefaultSorter",20),o(32,"Gradua\xE7\xE3o"),a()(),t(33,"th")(34,"mfDefaultSorter",21),o(35,"Numeral"),a()(),t(36,"th")(37,"mfDefaultSorter",22),o(38,"Nome Guerra"),a()(),t(39,"th")(40,"mfDefaultSorter",23),o(41,"Matr\xEDcula"),a()(),t(42,"th")(43,"mfDefaultSorter",24),o(44,"Data"),a()(),t(45,"th")(46,"mfDefaultSorter",25),o(47,"NUP"),a()(),t(48,"th")(49,"mfDefaultSorter",26),o(50,"Boletim Entrada"),a()(),t(51,"th")(52,"mfDefaultSorter",27),o(53,"Boletim Publica\xE7\xE3o"),a()(),t(54,"th"),o(55,"Op\xE7\xF5es"),a()()(),C(56,Le,4,1,"tbody"),t(57,"tfoot")(58,"tr")(59,"td",28)(60,"div",29),x(61,"mfBootstrapPaginator"),a()()()()()()()(),t(62,"div",30)(63,"div",31)(64,"div",32)(65,"div",33)(66,"h4",34),o(67,"Cadastrar"),a(),t(68,"button",35)(69,"span",36),o(70,"\xD7"),a()()(),t(71,"div",37)(72,"app-policiais-requeridas-form",38),h("refresh",function(){return _(m),b(l.refresh())}),a()()()()(),t(73,"div",39)(74,"div",40)(75,"div",32)(76,"div",33)(77,"h4",34),o(78,"Excluir"),a(),t(79,"button",35)(80,"span",36),o(81,"\xD7"),a()()(),t(82,"div",37),C(83,Ve,8,1),a()()()()()}i&2&&(s(6),g(6,l.user.perfil.policiais_requeridas_cad?6:-1),s(3),k("ngModel",l.quant),s(9),k("ngModel",l.pesquisa),s(2),S("mfData",l.data$)("mfRowsOnPage",l.quant)("mfSortBy","id")("mfSortOrder","desc"),s(36),g(56,l.data$?56:-1),s(27),g(83,l.excluir?83:-1))},dependencies:[$,Z,xe,O,Se,ve,Ce,ge,T,se,de,te,le,M,ae,he]});let r=n;return r})();export{ot as PoliciaisRequeridasComponent};
