import{a as Ee}from"./chunk-OAGX4K3V.js";import{a as Pe}from"./chunk-Y64AYFHZ.js";import{a as Se}from"./chunk-A6GCQO25.js";import{h as F}from"./chunk-NFMIVN66.js";import{a as xe,b as ve,c as Ce,d as ge}from"./chunk-AICVXWQ6.js";import{a as he}from"./chunk-I3SZ5FME.js";import{a as be}from"./chunk-HYOWEGV7.js";import{a as _e}from"./chunk-3HEW5RTP.js";import{a as de,b as pe}from"./chunk-UKCOEVIY.js";import{a as ue,d as fe}from"./chunk-HDKAZCIU.js";import{$b as D,C as G,Ca as E,Ea as h,F as W,Fa as m,I as T,Ka as U,La as H,Ma as J,Na as K,Nb as ee,O as x,Oa as n,P as v,Pa as _,Pb as b,Qb as M,Ra as X,Rb as ie,Sb as te,Tb as oe,Ua as V,Va as k,Vb as ae,W as R,Wa as O,Wb as ne,Xa as Y,Xb as re,Ya as $,Yb as le,Zb as se,_b as ce,ac as me,ca as c,cb as N,da as u,eb as j,l as q,la as C,na as S,sa as f,sb as L,ta as z,ua as Q,va as A,vb as Z,wa as t,xa as o,ya as p}from"./chunk-OWJSVT4P.js";var y=de.url,w="policiais-publicacoes",I=(()=>{let r=class r{constructor(e){this.http=e}index(){return this.http.get(`${y}/${w}`)}find(e){return this.http.get(`${y}/${w}/${e}`)}create(e){return this.http.post(`${y}/${w}`,e)}update(e,i){return this.http.put(`${y}/${w}/${e}`,i)}remove(e){return this.http.delete(`${y}/${w}/${e}`)}};r.\u0275fac=function(i){return new(i||r)(W(Z))},r.\u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"});let a=r;return a})();function Le(a,r){if(a&1&&p(0,"input-select",2),a&2){let s=m();S("data$",s.policiais$)}}function Me(a,r){if(a&1&&p(0,"input-select",3),a&2){let s=m();S("data$",s.publicacoesTipos$)}}var B=(()=>{let r=class r{constructor(e,i,l,d,P){this.formBuilder=e,this.policiaisPublicacoesService=i,this.policiaisService=l,this.publicacoesTiposService=d,this.toastr=P,this.refresh=new R}ngOnInit(){this.form=this.formBuilder.group({id:[null],policial:[null,b.compose([b.required])],publicacao_tipo:[null,b.compose([b.required])],texto:[null,b.compose([b.required])],boletim:[null,b.compose([b.maxLength(30),b.required])]}),this.subscription=this.policiaisService.disponiveis().subscribe({next:e=>{e.forEach(i=>{i.numeral?i.nome=`${i.graduacao.abreviatura} ${i.numeral} ${i.nome_guerra}, ${i.matricula}`:i.nome=`${i.graduacao.abreviatura} ${i.nome_guerra}, ${i.matricula}`}),this.policiais$=q(e)}}),this.publicacoesTipos$=this.publicacoesTiposService.index()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cadastrar(){this.form.value.id?this.policiaisPublicacoesService.update(this.form.value.id,this.form.value).subscribe({next:e=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:e=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.policiaisPublicacoesService.create(this.form.value).subscribe({next:e=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:e=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}editar(e){this.form.patchValue(e),this.form.get("policial")?.patchValue(e.policial.id),this.form.get("publicacao_tipo")?.patchValue(e.publicacao_tipo.id)}};r.\u0275fac=function(i){return new(i||r)(u(ce),u(I),u(Pe),u(Ee),u(F))},r.\u0275cmp=T({type:r,selectors:[["app-policiais-publicacoes-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[$],decls:12,vars:4,consts:[[3,"formGroup"],[1,"row"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-4",3,"data$"],["label","Tipo","id","publicacao_tipo","formControlName","publicacao_tipo",1,"col-sm-4",3,"data$"],["formControlName","boletim","label","Boletim","id","boletim","tipo","text",1,"col-sm-4"],[1,"row",2,"height","350px"],["formControlName","texto","label","Texto","id","texto",1,"col-sm-12"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"]],template:function(i,l){i&1&&(t(0,"form",0)(1,"div",1),C(2,Le,1,1,"input-select",2)(3,Me,1,1,"input-select",3),p(4,"input-text",4),o(),t(5,"div",5),p(6,"input-textarea",6),o(),t(7,"div",7)(8,"a",8),h("click",function(){return l.form.reset()}),n(9,"Cancelar"),o(),t(10,"button",9),h("click",function(){return l.cadastrar()}),n(11,"Cadastrar"),o()()()),i&2&&(S("formGroup",l.form),c(2),f(2,l.policiais$?2:-1),c(),f(3,l.publicacoesTipos$?3:-1),c(7),S("disabled",l.form.invalid))},dependencies:[L,D,oe,M,ie,me,ae,ne,be,he,Se]});let a=r;return a})();function De(a,r){a&1&&(t(0,"button",7),p(1,"i",39),o())}function Fe(a,r){if(a&1&&(n(0),N(1,"mask")),a&2){let s=m().$implicit;_(j(1,1,s.policial.numeral,"00.000"))}}function Ie(a,r){if(a&1){let s=E();t(0,"a",43),h("click",function(){x(s);let i=m().$implicit,l=m(2);return v(l.editar(i))}),p(1,"i",44),o()}}function Ve(a,r){if(a&1){let s=E();t(0,"a",45),h("click",function(){x(s);let i=m().$implicit,l=m(2);return v(l.delete(i))}),p(1,"i",46),o()}}function ke(a,r){if(a&1&&(t(0,"tr",40)(1,"td"),n(2),o(),t(3,"td"),n(4),o(),t(5,"td"),n(6),o(),t(7,"td"),C(8,Fe,2,4),o(),t(9,"td"),n(10),o(),t(11,"td"),n(12),N(13,"mask"),o(),t(14,"td"),n(15),o(),t(16,"td"),n(17),o(),t(18,"td"),C(19,Ie,2,0,"a",41)(20,Ve,2,0,"a",42),o()()),a&2){let s=r.$implicit,e=m(2);c(2),_(s.id),c(2),X("",s.policial.setor.subunidade.abreviatura," - ",s.policial.setor.subunidade.unidade.abreviatura,""),c(2),_(s.policial.graduacao.nome),c(2),f(8,s.policial.numeral?8:-1),c(2),_(s.policial.nome_guerra),c(2),_(j(13,11,s.policial.matricula,"000.000-0-A")),c(3),_(s.publicacao_tipo.nome),c(2),_(s.boletim),c(2),f(19,e.user.perfil.policiais_publicacoes_edt?19:-1),c(),f(20,e.user.perfil.policiais_publicacoes_del?20:-1)}}function Oe(a,r){a&1&&(t(0,"tr")(1,"td",26),n(2,"Sem informa\xE7\xE3o"),o()())}function Ne(a,r){if(a&1&&(t(0,"tbody"),Q(1,ke,21,14,"tr",40,z,!1,Oe,3,0,"tr"),o()),a&2){m();let s=K(21);c(),A(s.data)}}function je(a,r){if(a&1){let s=E();n(0," Tem certeza que deseja excluir: "),t(1,"b"),n(2),o(),t(3,"div",47)(4,"a",48),n(5,"Cancelar"),o(),t(6,"button",49),h("click",function(){x(s);let i=m();return v(i.confirm())}),n(7," Excluir "),o()()}if(a&2){let s=m();c(2),_(s.excluir.policial.nome)}}var si=(()=>{let r=class r{constructor(e,i,l){this.policiaisPublicacoesService=e,this.toastr=i,this.sessionService=l,this.quant=10}ngOnInit(){this.user=this.sessionService.getUser(),this.sessionService.checkPermission("policiais_publicacoes"),this.subscription=this.policiaisPublicacoesService.index().subscribe({next:e=>{this.data$=e,this.temp=e}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.policiaisPublicacoesService.index().subscribe({next:e=>{this.data$=e}})}editar(e){this.child.editar(e)}delete(e){this.excluir=e}confirm(){this.policiaisPublicacoesService.remove(this.excluir.id||0).subscribe({next:e=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:e=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var e=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(i=>i.policial.numeral?i.policial.numeral.toLocaleLowerCase().indexOf(e)!==-1||i.policial.nome.toLocaleLowerCase().indexOf(e)!==-1||i.policial.nome_guerra.toLocaleLowerCase().indexOf(e)!==-1||i.policial.matricula.toLocaleLowerCase().indexOf(e)!==-1||i.policial.graduacao.nome.toLocaleLowerCase().indexOf(e)!==-1||i.publicacao_tipo.nome.toLocaleLowerCase().indexOf(e)!==-1||i.boletim||!e:i.policial.nome.toLocaleLowerCase().indexOf(e)!==-1||i.policial.nome_guerra.toLocaleLowerCase().indexOf(e)!==-1||i.policial.matricula.toLocaleLowerCase().indexOf(e)!==-1||i.policial.graduacao.nome.toLocaleLowerCase().indexOf(e)!==-1||i.publicacao_tipo.nome.toLocaleLowerCase().indexOf(e)!==-1||i.boletim||!e)}}};r.\u0275fac=function(i){return new(i||r)(u(I),u(F),u(pe))},r.\u0275cmp=T({type:r,selectors:[["app-policiais-publicacoes"]],viewQuery:function(i,l){if(i&1&&U(B,5),i&2){let d;H(d=J())&&(l.child=d.first)}},standalone:!0,features:[Y([ue()]),$],decls:78,vars:9,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Publica\xE7\xF5es"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage","mfSortBy","mfSortOrder"],["by","id"],["by","policial.setor.subunidade.abreviatura"],["by","policial.graduacao.nome"],["by","policial.numeral"],["by","policial.nome_guerra"],["by","policial.matricula"],["by","publicacao_tipo.nome"],["by","boletim"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"refresh"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"fa","fa-plus"],[1,"optionshover"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","ml-1"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(i,l){if(i&1){let d=E();t(0,"div",1),p(1,"app-title",2),t(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6),C(6,De,2,0,"button",7),o(),t(7,"div",8)(8,"div",9)(9,"select",10),O("ngModelChange",function(g){return x(d),k(l.quant,g)||(l.quant=g),v(g)}),t(10,"option",11),n(11,"10"),o(),t(12,"option",12),n(13,"25"),o(),t(14,"option",13),n(15,"50"),o(),t(16,"option",14),n(17,"100"),o()(),t(18,"input",15),O("ngModelChange",function(g){return x(d),k(l.pesquisa,g)||(l.pesquisa=g),v(g)}),h("ngModelChange",function(){return x(d),v(l.pesquisar())}),o()()()(),t(19,"div",16)(20,"table",17,0)(22,"thead")(23,"tr")(24,"th")(25,"mfDefaultSorter",18),n(26,"#"),o()(),t(27,"th")(28,"mfDefaultSorter",19),n(29,"Subunidade"),o()(),t(30,"th")(31,"mfDefaultSorter",20),n(32,"Gradua\xE7\xE3o"),o()(),t(33,"th")(34,"mfDefaultSorter",21),n(35,"Numeral"),o()(),t(36,"th")(37,"mfDefaultSorter",22),n(38,"Nome Guerra"),o()(),t(39,"th")(40,"mfDefaultSorter",23),n(41,"Matr\xEDcula"),o()(),t(42,"th")(43,"mfDefaultSorter",24),n(44,"Tipo"),o()(),t(45,"th")(46,"mfDefaultSorter",25),n(47,"Boletim"),o()(),t(48,"th"),n(49,"Op\xE7\xF5es"),o()()(),C(50,Ne,4,1,"tbody"),t(51,"tfoot")(52,"tr")(53,"td",26)(54,"div",27),p(55,"mfBootstrapPaginator"),o()()()()()()()(),t(56,"div",28)(57,"div",29)(58,"div",30)(59,"div",31)(60,"h4",32),n(61,"Cadastrar"),o(),t(62,"button",33)(63,"span",34),n(64,"\xD7"),o()()(),t(65,"div",35)(66,"app-policiais-publicacoes-form",36),h("refresh",function(){return x(d),v(l.refresh())}),o()()()()(),t(67,"div",37)(68,"div",38)(69,"div",30)(70,"div",31)(71,"h4",32),n(72,"Excluir"),o(),t(73,"button",33)(74,"span",34),n(75,"\xD7"),o()()(),t(76,"div",35),C(77,je,8,1),o()()()()()}i&2&&(c(6),f(6,l.user.perfil.policiais_publicacoes_cad?6:-1),c(3),V("ngModel",l.quant),c(9),V("ngModel",l.pesquisa),c(2),S("mfData",l.data$)("mfRowsOnPage",l.quant)("mfSortBy","id")("mfSortOrder","desc"),c(30),f(50,l.data$?50:-1),c(27),f(77,l.excluir?77:-1))},dependencies:[L,_e,B,ge,xe,Ce,ve,D,le,se,ee,re,M,te,fe]});let a=r;return a})();export{si as PoliciaisPublicacoesComponent};
