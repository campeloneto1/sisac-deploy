import{a as Z}from"./chunk-LXIWSDD7.js";import{a as Y}from"./chunk-2IJB273A.js";import{a as W}from"./chunk-I3SZ5FME.js";import{a as Q}from"./chunk-HYOWEGV7.js";import{a as X}from"./chunk-3HEW5RTP.js";import{a as K,b as z}from"./chunk-4366GPH2.js";import{a as U,d as J}from"./chunk-HDKAZCIU.js";import{$b as L,C as y,Ea as F,F as I,Fa as E,I as $,Oa as a,Pa as d,Pb as x,Qb as j,Rb as w,Tb as H,Vb as G,Wb as q,Xa as k,Ya as D,_ as g,_b as O,ac as A,ca as n,cb as u,da as m,db as N,eb as f,l as h,la as S,na as p,pb as V,rb as R,sa as b,sb as T,ta as C,ua as P,va as M,vb as B,wa as e,xa as i,ya as v}from"./chunk-OWJSVT4P.js";var ae=K.url,ne="veiculos-policiais",ee=(()=>{let o=class o{constructor(c){this.http=c}relatorio(c){return this.http.post(`${ae}/${ne}/relatorio`,c)}};o.\u0275fac=function(t){return new(t||o)(I(B))},o.\u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"});let l=o;return l})();function re(l,o){if(l&1&&(a(0),u(1,"mask")),l&2){let r=E().$implicit;d(f(1,1,r.policial.numeral,"00.000"))}}function le(l,o){if(l&1&&(e(0,"tr",16)(1,"td"),a(2),i(),e(3,"td"),a(4),i(),e(5,"td"),a(6),i(),e(7,"td"),a(8),i(),e(9,"td"),a(10),i(),e(11,"td"),a(12),i(),e(13,"td"),S(14,re,2,4),i(),e(15,"td"),a(16),i(),e(17,"td"),a(18),u(19,"mask"),i(),e(20,"td"),a(21),u(22,"date"),i(),e(23,"td"),a(24),u(25,"date"),i(),e(26,"td"),a(27),i(),e(28,"td"),a(29),i()(),e(30,"tr",17)(31,"td",18),v(32,"div",19),i()()),l&2){let r=o.$implicit;n(2),d(r.id),n(2),d(r.veiculo.modelo.marca.nome),n(2),d(r.veiculo.modelo.nome),n(2),d(r.veiculo.placa),n(2),d(r.veiculo.placa_especial),n(2),d(r.policial.graduacao.abreviatura),n(2),b(14,r.policial.numeral?14:-1),n(2),d(r.policial.nome_guerra),n(2),d(f(19,14,r.policial.matricula,"000.000-0-A")),n(3),d(f(22,17,r.data_inicial,"dd/MM/yyyy HH:mm")),n(3),d(f(25,20,r.data_final,"dd/MM/yyyy HH:mm")),n(3),d(r.km_inicial),n(2),d(r.km_final),n(3),p("innerHTML",r.observacoes,g)}}function ce(l,o){if(l&1&&(e(0,"table",15)(1,"thead")(2,"tr")(3,"th"),a(4,"#"),i(),e(5,"th"),a(6,"Marca"),i(),e(7,"th"),a(8,"Modelo"),i(),e(9,"th"),a(10,"Placa"),i(),e(11,"th"),a(12,"Placa Especial"),i(),e(13,"th"),a(14,"Gradua\xE7\xE3o"),i(),e(15,"th"),a(16,"Numeral"),i(),e(17,"th"),a(18,"Nome de Guerra"),i(),e(19,"th"),a(20,"Matr\xEDcula"),i(),e(21,"th"),a(22,"Data Inicial"),i(),e(23,"th"),a(24,"Data Final"),i(),e(25,"th"),a(26,"KM Inicial"),i(),e(27,"th"),a(28,"KM Final"),i()()(),e(29,"tbody"),P(30,le,33,23,null,null,C),u(32,"async"),i()()),l&2){let r=E();n(30),M(N(32,0,r.data$))}}var $e=(()=>{let o=class o{constructor(c,t,s,_,ie){this.formBuilder=c,this.policiaisService=t,this.veiculosService=s,this.veiculosPoliciaisRelService=_,this.sessionService=ie}ngOnInit(){this.sessionService.checkPermission("relatorios"),this.form=this.formBuilder.group({policial:[null],veiculo:[null],data_inicial:[null,x.compose([x.required])],data_final:[null,x.compose([x.required])],subunidade:[null]}),this.subscription=this.veiculosService.disponiveis().subscribe({next:c=>{c.forEach(t=>{t.placa_especial?t.nome=`${t.modelo.marca.nome} ${t.modelo.nome}, Placa: ${t.placa}, Placa Esp. ${t.placa_especial}`:t.nome=`${t.modelo.marca.nome} ${t.modelo.nome}, Placa: ${t.placa}`}),this.veiculos$=h(c)}}),this.subscription2=this.policiaisService.disponiveis().subscribe({next:c=>{c.forEach(t=>{t.numeral?t.nome=`${t.graduacao.abreviatura} ${t.numeral} ${t.nome_guerra}, ${t.matricula}`:t.nome=`${t.graduacao.abreviatura} ${t.nome_guerra}, ${t.matricula}`}),this.policiais$=h(c)}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}pesquisar(){this.sessionService.getSubunidade()&&this.form.get("subunidade")?.patchValue(this.sessionService.getSubunidade()),this.data$=this.veiculosPoliciaisRelService.relatorio(this.form.value)}};o.\u0275fac=function(t){return new(t||o)(m(O),m(Y),m(Z),m(ee),m(z))},o.\u0275cmp=$({type:o,selectors:[["app-veiculos-policiais-rel"]],standalone:!0,features:[k([U()]),D],decls:21,vars:5,consts:[[1,"content-wrapper"],["titulo","Relat\xF3rio de Empr\xE9stimos de Ve\xEDculos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title","noprint"],[1,"card-title","print"],[1,"card-body","table-responsive"],[1,"noprint",3,"formGroup"],[1,"row"],["formControlName","data_inicial","label","Data Inical maior ou igual a","id","data_inicial","tipo","date",1,"col-sm-2"],["formControlName","data_final","label","Data Inicial menor ou igual a","id","data_final","tipo","date",1,"col-sm-2"],["label","Ve\xEDculo","id","veiculo","formControlName","veiculo",1,"col-sm-3",3,"data$"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-3",3,"data$"],["type","button",1,"btn","btn-primary","btn-block",3,"click","disabled"],[1,"table","table-hover","table-head-fixed","text-wrap"],["data-widget","expandable-table","aria-expanded","false"],[1,"expandable-body","d-none"],["colspan","14"],[2,"display","none",3,"innerHTML"]],template:function(t,s){t&1&&(e(0,"div",0),v(1,"app-title",1),e(2,"section",2)(3,"div",3)(4,"div",4)(5,"h3",5),a(6,"Filtro"),i(),e(7,"h3",6),a(8,"Relat\xF3rio de Empr\xE9stimos de Ve\xEDculos"),i()(),e(9,"div",7)(10,"form",8)(11,"div",9),v(12,"input-text",10)(13,"input-text",11),i(),e(14,"div",9),v(15,"input-select",12)(16,"input-select",13),i(),e(17,"div")(18,"button",14),F("click",function(){return s.pesquisar()}),a(19," Pesquisar "),i()()(),S(20,ce,33,2,"table",15),i()()()()),t&2&&(n(10),p("formGroup",s.form),n(5),p("data$",s.veiculos$),n(),p("data$",s.policiais$),n(2),p("disabled",s.form.invalid),n(2),b(20,s.data$?20:-1))},dependencies:[T,V,R,X,L,H,j,w,A,G,q,Q,W,J],styles:[".print[_ngcontent-%COMP%]{display:none}@media print{.noprint[_ngcontent-%COMP%]{display:none}.print[_ngcontent-%COMP%]{display:block}}"]});let l=o;return l})();export{$e as VeiculosPoliciaisRel};
