import{h as G}from"./chunk-NFMIVN66.js";import{a as Q,b as X,c as Y,d as Z}from"./chunk-AICVXWQ6.js";import{a as J}from"./chunk-3HEW5RTP.js";import{a as H,b as K}from"./chunk-UKCOEVIY.js";import{$b as U,C as T,Ca as b,Ea as _,F as $,Fa as h,I as D,Na as O,Nb as B,O as p,Oa as n,P as u,Pa as c,Qb as W,Sb as N,Ua as E,Va as w,Wa as M,Xb as R,Ya as j,Yb as z,Zb as A,ca as d,da as S,la as C,na as V,sa as y,sb as F,ta as I,ua as k,va as q,vb as P,wa as e,xa as i,ya as f}from"./chunk-OWJSVT4P.js";var g=H.url,x="logs",ee=(()=>{let r=class r{constructor(t){this.http=t}index(){return this.http.get(`${g}/${x}`)}find(t){return this.http.get(`${g}/${x}/${t}`)}create(t){return this.http.post(`${g}/${x}`,t)}update(t,a){return this.http.put(`${g}/${x}/${t}`,a)}remove(t){return this.http.delete(`${g}/${x}/${t}`)}};r.\u0275fac=function(a){return new(a||r)($(P))},r.\u0275prov=T({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();function ne(o,r){if(o&1){let s=b();e(0,"tr",32)(1,"td"),n(2),i(),e(3,"td"),n(4),i(),e(5,"td"),n(6),i(),e(7,"td"),n(8),i(),e(9,"td"),n(10),i(),e(11,"td")(12,"a",33),_("click",function(){let a=p(s).$implicit,l=h(2);return u(l.delete(a))}),f(13,"i",34),i()()()}if(o&2){let s=r.$implicit;d(2),c(s.id),d(2),c(s.mensagem),d(2),c(s.table),d(2),c(s.fk),d(2),c(s.user.nome)}}function re(o,r){o&1&&(e(0,"tr")(1,"td",22),n(2,"Sem informa\xE7\xE3o"),i()())}function oe(o,r){if(o&1&&(e(0,"tbody"),k(1,ne,14,5,"tr",32,I,!1,re,3,0,"tr"),i()),o&2){h();let s=O(20);d(),q(s.data)}}function ae(o,r){if(o&1){let s=b();n(0," Tem certeza que deseja excluir: "),e(1,"b"),n(2),i(),e(3,"div",35)(4,"a",36),n(5,"Cancelar"),i(),e(6,"button",37),_("click",function(){p(s);let a=h();return u(a.confirm())}),n(7," Excluir "),i()()}if(o&2){let s=h();d(2),c(s.excluir.mensagem)}}var xe=(()=>{let r=class r{constructor(t,a,l){this.logsService=t,this.toastr=a,this.sessionService=l,this.quant=10}ngOnInit(){this.sessionService.checkPermission("administrador"),this.subscription=this.logsService.index().subscribe({next:t=>{this.data$=t,this.temp=t}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.logsService.index().subscribe({next:t=>{this.data$=t}})}delete(t){this.excluir=t}confirm(){this.logsService.remove(this.excluir.id||0).subscribe({next:t=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:t=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var t=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(a=>a.mensagem.toLocaleLowerCase().indexOf(t)!==-1||a.table?.toLocaleLowerCase().indexOf(t)!==-1||!t)}}};r.\u0275fac=function(a){return new(a||r)(S(ee),S(G),S(K))},r.\u0275cmp=D({type:r,selectors:[["app-logs"]],standalone:!0,features:[j],decls:57,vars:8,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Logs"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage","mfSortBy","mfSortOrder"],["by","id"],["by","mensagem"],["by","table"],["by","fk"],["by","user.nome"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"optionshover"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","ml-1"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(a,l){if(a&1){let v=b();e(0,"div",1),f(1,"app-title",2),e(2,"section",3)(3,"div",4)(4,"div",5),f(5,"h3",6),e(6,"div",7)(7,"div",8)(8,"select",9),M("ngModelChange",function(m){return p(v),w(l.quant,m)||(l.quant=m),u(m)}),e(9,"option",10),n(10,"10"),i(),e(11,"option",11),n(12,"25"),i(),e(13,"option",12),n(14,"50"),i(),e(15,"option",13),n(16,"100"),i()(),e(17,"input",14),M("ngModelChange",function(m){return p(v),w(l.pesquisa,m)||(l.pesquisa=m),u(m)}),_("ngModelChange",function(){return p(v),u(l.pesquisar())}),i()()()(),e(18,"div",15)(19,"table",16,0)(21,"thead")(22,"tr")(23,"th")(24,"mfDefaultSorter",17),n(25,"#"),i()(),e(26,"th")(27,"mfDefaultSorter",18),n(28,"Mensagem"),i()(),e(29,"th")(30,"mfDefaultSorter",19),n(31,"Tabela"),i()(),e(32,"th")(33,"mfDefaultSorter",20),n(34,"FK"),i()(),e(35,"th")(36,"mfDefaultSorter",21),n(37,"Usu\xE1rio"),i()(),e(38,"th"),n(39,"Op\xE7\xF5es"),i()()(),C(40,oe,4,1,"tbody"),e(41,"tfoot")(42,"tr")(43,"td",22)(44,"div",23),f(45,"mfBootstrapPaginator"),i()()()()()()()(),e(46,"div",24)(47,"div",25)(48,"div",26)(49,"div",27)(50,"h4",28),n(51,"Excluir"),i(),e(52,"button",29)(53,"span",30),n(54,"\xD7"),i()()(),e(55,"div",31),C(56,ae,8,1),i()()()()()}a&2&&(d(8),E("ngModel",l.quant),d(9),E("ngModel",l.pesquisa),d(2),V("mfData",l.data$)("mfRowsOnPage",l.quant)("mfSortBy","id")("mfSortOrder","desc"),d(21),y(40,l.data$?40:-1),d(16),y(56,l.excluir?56:-1))},dependencies:[F,J,Z,Q,Y,X,U,z,A,B,R,W,N]});let o=r;return o})();export{xe as LogsComponent};
