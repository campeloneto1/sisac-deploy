import{a as ee}from"./chunk-CQPJYL2D.js";import{a as B}from"./chunk-HVK7BQD4.js";import{a as Oe}from"./chunk-Y64AYFHZ.js";import{a as Z}from"./chunk-A6GCQO25.js";import{h as T}from"./chunk-NFMIVN66.js";import{a as Ve,b as De,c as qe,d as Ne}from"./chunk-AICVXWQ6.js";import{a as Y}from"./chunk-I3SZ5FME.js";import{a as X}from"./chunk-HYOWEGV7.js";import{a as Fe}from"./chunk-3HEW5RTP.js";import{a as Te,b as K}from"./chunk-UKCOEVIY.js";import{a as ke,d as $e}from"./chunk-HDKAZCIU.js";import{$b as I,C as _e,Ca as S,Ea as u,F as fe,Fa as d,Fb as Se,I as y,Ia as ae,Ib as ge,Ka as H,La as J,Ma as U,Mb as Ee,Na as he,Nb as ye,O as v,Oa as o,P as x,Pa as c,Pb as g,Qb as w,Ra as ve,Rb as D,Sb as Me,Tb as q,Ua as re,Va as ne,Vb as N,W as k,Wa as oe,Wb as O,Xa as xe,Xb as Pe,Ya as M,Yb as we,Zb as Ie,_a as le,_b as L,ac as j,ca as m,cb as Q,da as f,eb as G,f as ue,l as R,la as b,na as C,rb as Ce,sa as p,sb as P,ta as $,ua as F,va as V,vb as be,wa as i,xa as a,ya as h}from"./chunk-OWJSVT4P.js";function Qe(n,s){if(n&1){let r=S();i(0,"div",1)(1,"input-select",12),u("ngModelChange",function(){v(r);let e=d();return x(e.select())}),a(),h(2,"input-text",13),i(3,"div",14)(4,"button",15),u("click",function(){v(r);let e=d();return x(e.addMaterial())}),h(5,"i",16),a()()()}if(n&2){let r=d();m(),C("data$",r.materiais$),m(),C("max",r.maxamon)("min",1),m(2),C("disabled",!r.form.value.material||!r.form.value.quantidade)}}function Ge(n,s){if(n&1){let r=S();i(0,"tr")(1,"td"),o(2),a(),i(3,"td"),o(4),a(),i(5,"td")(6,"i",18),u("click",function(){let e=v(r).$index,l=d(2);return x(l.removeMaterial(e))}),a()()()}if(n&2){let r=s.$implicit;m(2),c(r.material.serial),m(2),c(r.quantidade)}}function ze(n,s){if(n&1&&(i(0,"div",1)(1,"table",17)(2,"thead")(3,"tr")(4,"th"),o(5,"Serial"),a(),i(6,"th"),o(7,"Quant."),a(),i(8,"th"),o(9,"Op\xE7\xF5es"),a()()(),i(10,"tbody"),F(11,Ge,7,2,"tr",null,$),a()()()),n&2){let r=d();m(11),V(r.materiaisselected)}}var de=(()=>{let s=class s{constructor(t,e,l,_,W,E){this.formBuilder=t,this.materiaisPoliciaisService=e,this.policiaisService=l,this.materiaisService=_,this.toastr=W,this.sessionService=E,this.materiaisselected=[],this.editando=!1,this.maxamon=1,this.refresh=new k}ngOnInit(){this.form=this.formBuilder.group({id:[null],policial:[null,g.compose([g.required])],material:[null],quantidade:[1,g.compose([g.min(1)])],observacoes:[null],cautela:[null],materiais:[null],subunidade:[null]}),this.subscription=this.policiaisService.disponiveis().subscribe({next:t=>{t.forEach(e=>{e.numeral?e.nome=`${e.graduacao.abreviatura} ${e.numeral} ${e.nome_guerra}, ${e.matricula}`:e.nome=`${e.graduacao.abreviatura} ${e.nome_guerra}, ${e.matricula}`}),this.policiais$=R(t)}}),this.subscription2=this.materiaisService.disponiveis().subscribe({next:t=>{t.forEach(e=>{e.serial?e.serial=`${e.material_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, Disp: ${e.quantidade_disponivel}`:e.serial=`${e.material_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome}, Disp: ${e.quantidade_disponivel}`}),this.materiais$=R(t)}})}reset(){this.form.reset(),this.editando=!1,this.form.get("quantidade")?.patchValue(1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}cadastrar(){this.form.value.cautela!==!0&&this.form.get("cautela")?.patchValue(null),this.form.value.id?(delete this.form.value.materiais,delete this.form.value.material,delete this.form.value.quantidade,this.materiaisPoliciaisService.update(this.form.value.id,this.form.value).subscribe({next:t=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:t=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})):(this.form.get("materiais")?.patchValue(this.materiaisselected),this.sessionService.getSubunidade()?this.form.get("subunidade")?.patchValue(this.sessionService.getSubunidade()):this.toastr.error("Selecione uma subunidade!"),this.materiaisPoliciaisService.create(this.form.value).subscribe({next:t=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit(),this.materiaisselected=[]},error:t=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}))}select(){return ue(this,null,function*(){if(this.form.value.material){var t;yield this.materiais$.subscribe(e=>{t=e.filter(l=>l.id==this.form.value.material)}),t&&(this.maxamon=t[0].quantidade_disponivel)}})}editar(t){this.editando=!0,this.form.patchValue(t),this.form.get("policial")?.patchValue(t.policial.id)}addMaterial(){if(this.form.value.quantidade>0){let t;this.materiais$.subscribe(e=>{t=e.filter(l=>l.id==this.form.value.material)}),this.form.value.quantidade>t[0].quantidade_disponivel&&this.form.get("quantidade")?.patchValue(t[0].quantidade_disponivel),this.materiaisselected.push({materialId:this.form.value.material,material:t[0],quantidade:this.form.value.quantidade}),this.form.get("material")?.patchValue(null),this.form.get("quantidade")?.patchValue(1)}}removeMaterial(t){this.materiaisselected.splice(t,1)}};s.\u0275fac=function(e){return new(e||s)(f(L),f(B),f(Oe),f(ee),f(T),f(K))},s.\u0275cmp=y({type:s,selectors:[["app-materiais-policiais-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[M],decls:17,vars:5,consts:[[3,"formGroup"],[1,"row"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-6",3,"data$"],[1,"col-sm-2"],[1,"form-check"],["type","checkbox","checked","","id","cautela","formControlName","cautela",1,"form-check-input"],["for","cautela",1,"form-check-label"],[1,"row",2,"height","350px"],["formControlName","observacoes","label","Observa\xE7\xF5es","id","observacoes",1,"col-sm-12"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],["label","Material","id","material","formControlName","material","optionname","serial",1,"col-sm-6",3,"ngModelChange","data$"],["formControlName","quantidade","label","Quantidade","id","quantidade","tipo","number",1,"col-sm-2",3,"max","min"],[1,"col-sm-2",2,"padding-top","30px"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fa","fa-plus"],[1,"table","table-hover","table-head-fixed","text-nowrap"],["aria-hidden","true",1,"fa","fa-trash","text-danger","point",3,"click"]],template:function(e,l){e&1&&(i(0,"form",0)(1,"div",1),h(2,"input-select",2),i(3,"div",3)(4,"div",4),h(5,"input",5),i(6,"label",6),o(7,"Cautela"),a()()()(),b(8,Qe,6,4,"div",1)(9,ze,13,0,"div",1),i(10,"div",7),h(11,"input-textarea",8),a(),i(12,"div",9)(13,"a",10),u("click",function(){return l.form.reset()}),o(14,"Cancelar"),a(),i(15,"button",11),u("click",function(){return l.cadastrar()}),o(16,"Cadastrar"),a()()()),e&2&&(C("formGroup",l.form),m(2),C("data$",l.policiais$),m(6),p(8,l.editando?-1:8),m(),p(9,l.materiaisselected&&!l.editando?9:-1),m(6),C("disabled",l.form.invalid))},dependencies:[P,I,q,Ee,w,D,j,N,O,X,Y,Z]});let n=s;return n})();function Ae(n,s){if(n&1&&o(0),n&2){let r=d().$implicit;c(r.material.modelo.marca.nome)}}function We(n,s){if(n&1&&(i(0,"tr")(1,"td"),o(2),a(),i(3,"td"),o(4),a(),i(5,"td"),b(6,Ae,1,1),a(),i(7,"td"),o(8),a(),i(9,"td"),o(10),a(),i(11,"td"),o(12),a(),i(13,"td"),h(14,"input",7),a()()),n&2){let r=s.$implicit;m(2),c(r.id),m(2),c(r.material.material_tipo.nome),m(2),p(6,r.material.modelo.marca?6:-1),m(2),c(r.material.modelo.nome),m(2),c(r.material.serial),m(2),c(r.quantidade),m(2),ae("max",r.quantidade),ae("id",r.id),C("value",r.quantidade)}}var ce=(()=>{let s=class s{constructor(t,e,l){this.formBuilder=t,this.materiaisPoliciaisService=e,this.toastr=l,this.refresh=new k}ngOnInit(){this.form=this.formBuilder.group({id:[null],observacoes:[this.materialPolicial.observacoes],materiais:[null]})}cadastrar(){var t=[];let e=document.querySelectorAll("#formdev input");Array.from(e).forEach(l=>{l.id&&t.push({id:l.id,quantidade:parseInt(l.value)})}),this.form.get("materiais")?.patchValue(t),this.form.get("id")?.patchValue(this.materialPolicial.id),this.materiaisPoliciaisService.receber(this.form.value).subscribe({next:l=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:l=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}};s.\u0275fac=function(e){return new(e||s)(f(L),f(B),f(T))},s.\u0275cmp=y({type:s,selectors:[["app-materiais-policiais-form-receber"]],inputs:{materialPolicial:"materialPolicial"},outputs:{refresh:"refresh"},standalone:!0,features:[M],decls:28,vars:1,consts:[["id","formdev","name","formdev",3,"formGroup"],[1,"table","table-hover","table-head-fixed","text-nowrap"],[1,"row",2,"height","350px"],["formControlName","observacoes","label","Observa\xE7\xF5es","id","observacoes",1,"col-sm-12"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","number","min","0",1,"form-control",3,"max","id","value"]],template:function(e,l){e&1&&(i(0,"form",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),o(5,"#"),a(),i(6,"th"),o(7,"Tipo"),a(),i(8,"th"),o(9,"Marca"),a(),i(10,"th"),o(11,"Modelo"),a(),i(12,"th"),o(13,"Serial"),a(),i(14,"th"),o(15,"Quantidade"),a(),i(16,"th"),o(17,"Quant. Recebida"),a()()(),i(18,"tbody"),F(19,We,15,9,"tr",null,$),a()(),i(21,"div",2),h(22,"input-textarea",3),a(),i(23,"div",4)(24,"a",5),o(25,"Cancelar"),a(),i(26,"button",6),u("click",function(){return l.cadastrar()}),o(27," Receber "),a()()()),e&2&&(C("formGroup",l.form),m(19),V(l.materialPolicial.materiais_policiais_itens))},dependencies:[P,I,q,w,D,j,N,O,Z]});let n=s;return n})();var z=Te.url,A="materiais-policiais-itens",te=(()=>{let s=class s{constructor(t){this.http=t}index(){return this.http.get(`${z}/${A}`)}find(t){return this.http.get(`${z}/${A}/${t}`)}create(t){return this.http.post(`${z}/${A}`,t)}update(t,e){return this.http.put(`${z}/${A}/${t}`,e)}remove(t){return this.http.delete(`${z}/${A}/${t}`)}};s.\u0275fac=function(e){return new(e||s)(fe(be))},s.\u0275prov=_e({token:s,factory:s.\u0275fac,providedIn:"root"});let n=s;return n})();var pe=(()=>{let s=class s{constructor(t,e,l,_){this.formBuilder=t,this.materiaisPoliciaisItensService=e,this.materiaisService=l,this.toastr=_,this.refresh=new k,this.cancel=new k}ngOnInit(){this.form=this.formBuilder.group({id:[null],material:[null,g.compose([g.required])],material_policial:[this.material_policial_id],quantidade:[1,g.compose([g.required,g.min(1)])]}),this.subscription=this.materiaisService.disponiveis().subscribe({next:t=>{t.forEach(e=>{e.serial?e.serial=`${e.material_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, Disp: ${e.quantidade_disponivel}`:e.serial=`${e.material_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome}, Disp: ${e.quantidade_disponivel}`}),this.materiais$=R(t)}})}reset(){this.form.reset(),this.form.get("quantidade")?.patchValue(1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cadastrar(){this.form.value.id?this.materiaisPoliciaisItensService.update(this.form.value.id,this.form.value).subscribe({next:t=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:t=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.materiaisPoliciaisItensService.create(this.form.value).subscribe({next:t=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:t=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}cancelar(){this.form.reset(),this.cancel.emit()}};s.\u0275fac=function(e){return new(e||s)(f(L),f(te),f(ee),f(T))},s.\u0275cmp=y({type:s,selectors:[["app-materiais-policiais-itens-form"]],inputs:{material_policial_id:"material_policial_id"},outputs:{refresh:"refresh",cancel:"cancel"},standalone:!0,features:[M],decls:9,vars:3,consts:[[3,"formGroup"],[1,"row"],["label","Material","id","material","formControlName","material","optionname","serial",1,"col-sm-6",3,"data$"],["formControlName","quantidade","label","Quantidade","id","quantidade","tipo","number",1,"col-sm-2"],[1,"d-flex","justify-content-end"],[1,"btn","btn-link","text-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(e,l){e&1&&(i(0,"form",0)(1,"div",1),h(2,"input-select",2)(3,"input-text",3),a(),i(4,"div",4)(5,"a",5),u("click",function(){return l.cancelar()}),o(6,"Cancelar"),a(),i(7,"button",6),u("click",function(){return l.cadastrar()}),o(8,"Cadastrar"),a()()()),e&2&&(C("formGroup",l.form),m(2),C("data$",l.materiais$),m(5),C("disabled",l.form.invalid))},dependencies:[P,I,q,w,D,j,N,O,X,Y]});let n=s;return n})();var He=n=>["/MateriaisPoliciaisCautela",n],Je=n=>["/MateriaisPoliciaisJustificativa",n];function Ue(n,s){if(n&1){let r=S();i(0,"button",41),u("click",function(){v(r);let e=d();return x(e.cadastrar())}),h(1,"i",42),a()}}function Ke(n,s){if(n&1&&(o(0),Q(1,"mask")),n&2){let r=d().$implicit;c(G(1,1,r.policial.numeral,"00.000"))}}function Xe(n,s){if(n&1&&(i(0,"a",46),h(1,"i",50),a()),n&2){let r=d(2).$implicit;C("routerLink",le(1,He,r.id))}}function Ye(n,s){if(n&1){let r=S();i(0,"a",51),u("click",function(){v(r);let e=d(2).$implicit,l=d(2);return x(l.devolver(e))}),h(1,"i",52),a()}}function Ze(n,s){if(n&1){let r=S();i(0,"a",53),u("click",function(){v(r);let e=d(2).$implicit,l=d(2);return x(l.editar(e))}),h(1,"i",54),a()}}function ei(n,s){if(n&1){let r=S();i(0,"a",55),u("click",function(){v(r);let e=d(2).$implicit,l=d(2);return x(l.delete(e))}),h(1,"i",56),a()}}function ii(n,s){if(n&1&&b(0,Xe,2,3,"a",46)(1,Ye,2,0,"a",47)(2,Ze,2,0,"a",48)(3,ei,2,0,"a",49),n&2){let r=d().$implicit,t=d(2);p(0,r.cautela?0:-1),m(),p(1,t.user.perfil.materiais_policiais_cad?1:-1),m(),p(2,t.user.perfil.materiais_policiais_edt?2:-1),m(),p(3,t.user.perfil.materiais_policiais_del?3:-1)}}function ti(n,s){if(n&1&&(i(0,"a",45),h(1,"i",50),a()),n&2){let r=d().$implicit;C("routerLink",le(1,Je,r.id))}}function ai(n,s){if(n&1){let r=S();i(0,"tr",43)(1,"td"),o(2),a(),i(3,"td"),o(4),a(),i(5,"td"),o(6),a(),i(7,"td"),b(8,Ke,2,4),a(),i(9,"td"),o(10),a(),i(11,"td"),o(12),Q(13,"mask"),a(),i(14,"td"),o(15),Q(16,"date"),a(),i(17,"td")(18,"button",44),u("click",function(){let e=v(r).$implicit,l=d(2);return x(l.showItens(e))}),o(19," Materiais "),a()(),i(20,"td"),o(21),Q(22,"date"),a(),i(23,"td"),b(24,ii,4,4)(25,ti,2,3,"a",45),a()()}if(n&2){let r=s.$implicit;m(2),c(r.id),m(2),ve("",r.subunidade.abreviatura," - ",r.subunidade.unidade.abreviatura,""),m(2),c(r.policial.graduacao.nome),m(2),p(8,r.policial.numeral?8:-1),m(2),c(r.policial.nome_guerra),m(2),c(G(13,11,r.policial.matricula,"000.000-0-A")),m(3),c(G(16,14,r.data_emprestimo,"dd/MM/yyyy HH:mm")),m(6),c(G(22,17,r.data_devolucao,"dd/MM/yyyy HH:mm")),m(3),p(24,r.data_devolucao?-1:24),m(),p(25,r.data_devolucao?25:-1)}}function ri(n,s){n&1&&(i(0,"tr")(1,"td",26),o(2,"Sem informa\xE7\xE3o"),a()())}function ni(n,s){if(n&1&&(i(0,"tbody"),F(1,ai,26,20,"tr",43,$,!1,ri,3,0,"tr"),a()),n&2){d();let r=he(21);m(),V(r.data)}}function oi(n,s){if(n&1){let r=S();i(0,"app-materiais-policiais-form",57),u("refresh",function(){v(r);let e=d();return x(e.refresh())}),a()}}function li(n,s){if(n&1){let r=S();i(0,"button",61),u("click",function(){v(r);let e=d(2);return x(e.caditem=!0)}),h(1,"i",42),a()}}function si(n,s){if(n&1){let r=S();i(0,"app-materiais-policiais-itens-form",62),u("refresh",function(){v(r);let e=d(2);return x(e.refreshItens())})("cancel",function(){v(r);let e=d(2);return x(e.cancelItem())}),a()}if(n&2){let r=d(2);C("material_policial_id",r.materialPolicial.id)}}function mi(n,s){if(n&1&&o(0),n&2){let r=d().$implicit;c(r.material.modelo.marca.nome)}}function di(n,s){if(n&1&&o(0),n&2){let r=d().$implicit;c(r.material.serial)}}function ci(n,s){if(n&1){let r=S();i(0,"i",64),u("click",function(){v(r);let e=d().$implicit,l=d(2);return x(l.rmvItem(e.id||0))}),a()}}function pi(n,s){if(n&1&&(i(0,"tr")(1,"td"),o(2),a(),i(3,"td"),o(4),a(),i(5,"td"),b(6,mi,1,1),a(),i(7,"td"),o(8),a(),i(9,"td"),b(10,di,1,1),a(),i(11,"td"),o(12),a(),i(13,"td"),o(14),a(),i(15,"td"),b(16,ci,1,0,"i",63),a()()),n&2){let r=s.$implicit,t=d(2);m(2),c(r.id),m(2),c(r.material.material_tipo.nome),m(2),p(6,r.material.modelo.marca?6:-1),m(2),c(r.material.modelo.nome),m(2),p(10,r.material.serial?10:-1),m(2),c(r.quantidade),m(2),c(r.quantidade_devolucao),m(2),p(16,!t.materialPolicial.data_devolucao&&t.user.perfil.materiais_policiais_edt?16:-1)}}function ui(n,s){if(n&1&&(i(0,"div",30)(1,"div",31)(2,"h4",32),o(3," Materiais "),b(4,li,2,0,"button",58),a(),i(5,"button",33)(6,"span",34),o(7,"\xD7"),a()()(),i(8,"div",35),b(9,si,1,1,"app-materiais-policiais-itens-form",59),i(10,"table",60)(11,"thead")(12,"tr")(13,"th"),o(14,"#"),a(),i(15,"th"),o(16,"Tipo"),a(),i(17,"th"),o(18,"Marca"),a(),i(19,"th"),o(20,"Modelo"),a(),i(21,"th"),o(22,"Serial"),a(),i(23,"th"),o(24,"Quantidade"),a(),i(25,"th"),o(26,"Quant. Devolvido"),a(),i(27,"th"),o(28,"Op\xE7\xF5es"),a()()(),i(29,"tbody"),F(30,pi,17,8,"tr",null,$),a()()()()),n&2){let r=d();m(4),p(4,!r.materialPolicial.data_devolucao&&r.user.perfil.materiais_policiais_edt?4:-1),m(5),p(9,r.caditem?9:-1),m(21),V(r.materialPolicial.materiais_policiais_itens)}}function _i(n,s){if(n&1){let r=S();i(0,"app-materiais-policiais-form-receber",65),u("refresh",function(){v(r);let e=d();return x(e.refresh())}),a()}if(n&2){let r=d();C("materialPolicial",r.materialPolicial)}}function fi(n,s){if(n&1){let r=S();o(0," Tem certeza que deseja excluir: "),i(1,"b"),o(2),a(),i(3,"div",66)(4,"a",67),o(5,"Cancelar"),a(),i(6,"button",68),u("click",function(){v(r);let e=d();return x(e.confirm())}),o(7," Excluir "),a()()}if(n&2){let r=d();m(2),c(r.excluir.policial.nome)}}var ct=(()=>{let s=class s{constructor(t,e,l,_){this.materiaisPoliciaisService=t,this.materiaisPoliciaisItensService=e,this.toastr=l,this.sessionService=_,this.quant=10,this.cadastrando=!1,this.caditem=!1}ngOnInit(){this.user=this.sessionService.getUser(),this.sessionService.checkPermission("materiais_policiais"),this.subscription=this.materiaisPoliciaisService.index().subscribe({next:t=>{this.data$=t,this.temp=t}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.materiaisPoliciaisService.index().subscribe({next:t=>{this.data$=t}})}editar(t){this.cadastrando=!1,setTimeout(()=>{this.cadastrando=!0},100),setTimeout(()=>{this.child.editar(t)},200)}cadastrar(){this.cadastrando=!1,setTimeout(()=>{this.cadastrando=!0},100),setTimeout(()=>{this.child.reset()},200)}delete(t){this.excluir=t}confirm(){this.materiaisPoliciaisService.remove(this.excluir.id||0).subscribe({next:t=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:t=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var t=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(e=>e.policial.numeral?e.policial.numeral.toLocaleLowerCase().indexOf(t)!==-1||e.policial.nome.toLocaleLowerCase().indexOf(t)!==-1||e.policial.nome_guerra.toLocaleLowerCase().indexOf(t)!==-1||e.policial.matricula.toLocaleLowerCase().indexOf(t)!==-1||e.policial.graduacao.nome.toLocaleLowerCase().indexOf(t)!==-1||!t:e.policial.nome.toLocaleLowerCase().indexOf(t)!==-1||e.policial.nome_guerra.toLocaleLowerCase().indexOf(t)!==-1||e.policial.matricula.toLocaleLowerCase().indexOf(t)!==-1||e.policial.graduacao.nome.toLocaleLowerCase().indexOf(t)!==-1||!t)}}showItens(t){this.caditem=!1,this.materiaisPoliciaisService.find(t.id||0).subscribe({next:e=>{this.materialPolicial=e}})}refreshItens(){this.caditem=!1,this.materiaisPoliciaisService.find(this.materialPolicial.id||0).subscribe({next:t=>{this.materialPolicial=t}})}rmvItem(t){window.confirm("Tem certeza que deseja excluir o item?")&&this.materiaisPoliciaisItensService.remove(t).subscribe({next:e=>{this.materiaisPoliciaisService.find(this.materialPolicial.id||0).subscribe({next:l=>{this.materialPolicial=l}})}})}cancelItem(){this.caditem=!1}devolver(t){this.materiaisPoliciaisService.find(t.id||0).subscribe({next:e=>{this.materialPolicial=e}})}};s.\u0275fac=function(e){return new(e||s)(f(B),f(te),f(T),f(K))},s.\u0275cmp=y({type:s,selectors:[["app-materiais-policiais"]],viewQuery:function(e,l){if(e&1&&(H(de,5),H(ce,5),H(pe,5)),e&2){let _;J(_=U())&&(l.child=_.first),J(_=U())&&(l.childreceber=_.first),J(_=U())&&(l.childarmamento=_.first)}},standalone:!0,features:[xe([ke()]),M],decls:94,vars:12,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Empr\xE9stimos de Material"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage","mfSortBy","mfSortOrder"],["by","id"],["by","subunidade.abreviatura"],["by","policial.graduacao.nome"],["by","policial.numeral"],["by","policial.nome_guerra"],["by","policial.matricula"],["by","data_emprestimo"],["by","data_devolucao"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["id","modalitens","aria-hidden","true",1,"modal","fade",2,"display","none"],["id","modaldev","aria-hidden","true",1,"modal","fade",2,"display","none"],[3,"materialPolicial"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-plus"],[1,"optionshover"],["data-bs-toggle","modal","data-bs-target","#modalitens",1,"btn","btn-xs","btn-outline-primary",3,"click"],["title","Imprimir Justificativa","target","_blank",1,"options","point",3,"routerLink"],["title","Imprimir Cautela","target","_blank",1,"options","point",3,"routerLink"],["title","Devolver","data-bs-toggle","modal","data-bs-target","#modaldev",1,"options","point","ml-1"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point","ml-1"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point","ml-1"],["aria-hidden","true",1,"fa","fa-print","text-primary"],["title","Devolver","data-bs-toggle","modal","data-bs-target","#modaldev",1,"options","point","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-download","text-primary"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger"],[3,"refresh"],["title","Cadastrar",1,"btn","btn-outline-primary"],[3,"material_policial_id"],[1,"table","table-hover","table-head-fixed","text-nowrap"],["title","Cadastrar",1,"btn","btn-outline-primary",3,"click"],[3,"refresh","cancel","material_policial_id"],["aria-hidden","true",1,"fa","fa-trash","text-danger","point"],["aria-hidden","true",1,"fa","fa-trash","text-danger","point",3,"click"],[3,"refresh","materialPolicial"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(e,l){if(e&1){let _=S();i(0,"div",1),h(1,"app-title",2),i(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6),b(6,Ue,2,0,"button",7),a(),i(7,"div",8)(8,"div",9)(9,"select",10),oe("ngModelChange",function(E){return v(_),ne(l.quant,E)||(l.quant=E),x(E)}),i(10,"option",11),o(11,"10"),a(),i(12,"option",12),o(13,"25"),a(),i(14,"option",13),o(15,"50"),a(),i(16,"option",14),o(17,"100"),a()(),i(18,"input",15),oe("ngModelChange",function(E){return v(_),ne(l.pesquisa,E)||(l.pesquisa=E),x(E)}),u("ngModelChange",function(){return v(_),x(l.pesquisar())}),a()()()(),i(19,"div",16)(20,"table",17,0)(22,"thead")(23,"tr")(24,"th")(25,"mfDefaultSorter",18),o(26,"#"),a()(),i(27,"th")(28,"mfDefaultSorter",19),o(29,"Subunidade"),a()(),i(30,"th")(31,"mfDefaultSorter",20),o(32,"Gradua\xE7\xE3o"),a()(),i(33,"th")(34,"mfDefaultSorter",21),o(35,"Numeral"),a()(),i(36,"th")(37,"mfDefaultSorter",22),o(38,"Nome Guerra"),a()(),i(39,"th")(40,"mfDefaultSorter",23),o(41,"Matr\xEDcula"),a()(),i(42,"th")(43,"mfDefaultSorter",24),o(44,"Data Emprestimo"),a()(),i(45,"th"),o(46,"Materiais"),a(),i(47,"th")(48,"mfDefaultSorter",25),o(49,"Data Devolu\xE7\xE3o"),a()(),i(50,"th"),o(51,"Op\xE7\xF5es"),a()()(),b(52,ni,4,1,"tbody"),i(53,"tfoot")(54,"tr")(55,"td",26)(56,"div",27),h(57,"mfBootstrapPaginator"),a()()()()()()()(),i(58,"div",28)(59,"div",29)(60,"div",30)(61,"div",31)(62,"h4",32),o(63,"Cadastrar"),a(),i(64,"button",33)(65,"span",34),o(66,"\xD7"),a()()(),i(67,"div",35),b(68,oi,1,0,"app-materiais-policiais-form"),a()()()(),i(69,"div",36)(70,"div",29),b(71,ui,32,2,"div",30),a()(),i(72,"div",37)(73,"div",29)(74,"div",30)(75,"div",31)(76,"h4",32),o(77," Devolu\xE7\xE3o "),a(),i(78,"button",33)(79,"span",34),o(80,"\xD7"),a()()(),i(81,"div",35),b(82,_i,1,1,"app-materiais-policiais-form-receber",38),a()()()(),i(83,"div",39)(84,"div",40)(85,"div",30)(86,"div",31)(87,"h4",32),o(88,"Excluir"),a(),i(89,"button",33)(90,"span",34),o(91,"\xD7"),a()()(),i(92,"div",35),b(93,fi,8,1),a()()()()()}e&2&&(m(6),p(6,l.user.perfil.materiais_policiais_cad?6:-1),m(3),re("ngModel",l.quant),m(9),re("ngModel",l.pesquisa),m(2),C("mfData",l.data$)("mfRowsOnPage",l.quant)("mfSortBy","id")("mfSortOrder","desc"),m(32),p(52,l.data$?52:-1),m(16),p(68,l.cadastrando?68:-1),m(3),p(71,l.materialPolicial?71:-1),m(11),p(82,l.materialPolicial?82:-1),m(11),p(93,l.excluir?93:-1))},dependencies:[P,Ce,Fe,de,ce,pe,Ne,Ve,qe,De,I,we,Ie,ye,Pe,w,Me,$e,ge,Se]});let n=s;return n})();export{ct as MateriaisPoliciaisComponent};
