import{a as V}from"./chunk-NIV35Z5W.js";import{h as T}from"./chunk-NFMIVN66.js";import{a as oe,b as ne,c as ae,d as se}from"./chunk-AICVXWQ6.js";import{a as ie}from"./chunk-HYOWEGV7.js";import{a as re}from"./chunk-3HEW5RTP.js";import{b as te}from"./chunk-UKCOEVIY.js";import"./chunk-HDKAZCIU.js";import{$b as M,Ca as S,Ea as c,Fa as _,I as g,Ka as W,La as $,Ma as z,Na as A,Nb as G,O as p,Oa as n,P as f,Pa as x,Pb as u,Qb as w,Rb as Q,Sb as R,Tb as H,Ua as I,Va as L,Vb as J,W as O,Wa as q,Wb as K,Xb as U,Ya as y,Yb as X,Zb as Y,_b as Z,ac as ee,ca as l,da as h,la as D,na as b,sa as F,sb as E,ta as j,ua as B,va as P,wa as t,xa as i,ya as v}from"./chunk-OWJSVT4P.js";var N=(()=>{let s=class s{constructor(e,r,o){this.formBuilder=e,this.cursosService=r,this.toastr=o,this.refresh=new O}ngOnInit(){this.form=this.formBuilder.group({id:[null],nome:[null,u.compose([u.required,u.minLength(5),u.maxLength(100)])],abreviatura:[null,u.compose([u.required,u.minLength(2),u.maxLength(5)])]})}cadastrar(){this.form.value.id?this.cursosService.update(this.form.value.id,this.form.value).subscribe({next:e=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:e=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.cursosService.create(this.form.value).subscribe({next:e=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:e=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}editar(e){this.form.patchValue(e)}};s.\u0275fac=function(r){return new(r||s)(h(Z),h(V),h(T))},s.\u0275cmp=g({type:s,selectors:[["app-cursos-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[y],decls:9,vars:2,consts:[[3,"formGroup"],[1,"row"],["formControlName","nome","label","Nome","id","nome","tipo","text",1,"col-sm-4"],["formControlName","abreviatura","label","Abreviatura","id","abreviatura","tipo","text",1,"col-sm-2"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"]],template:function(r,o){r&1&&(t(0,"form",0)(1,"div",1),v(2,"input-text",2)(3,"input-text",3),i(),t(4,"div",4)(5,"a",5),c("click",function(){return o.form.reset()}),n(6,"Cancelar"),i(),t(7,"button",6),c("click",function(){return o.cadastrar()}),n(8,"Cadastrar"),i()()()),r&2&&(b("formGroup",o.form),l(7),b("disabled",o.form.invalid))},dependencies:[E,M,H,w,Q,ee,J,K,ie]});let a=s;return a})();function ue(a,s){if(a&1){let m=S();t(0,"tr",35)(1,"td"),n(2),i(),t(3,"td"),n(4),i(),t(5,"td"),n(6),i(),t(7,"td")(8,"a",36),c("click",function(){let r=p(m).$implicit,o=_(2);return f(o.editar(r))}),v(9,"i",37),i(),t(10,"a",38),c("click",function(){let r=p(m).$implicit,o=_(2);return f(o.delete(r))}),v(11,"i",39),i()()()}if(a&2){let m=s.$implicit;l(2),x(m.id),l(2),x(m.nome),l(2),x(m.abreviatura)}}function pe(a,s){a&1&&(t(0,"tr")(1,"td",22),n(2,"Sem informa\xE7\xE3o"),i()())}function fe(a,s){if(a&1&&(t(0,"tbody"),B(1,ue,12,3,"tr",35,j,!1,pe,3,0,"tr"),i()),a&2){_();let m=A(22);l(),P(m.data)}}function he(a,s){if(a&1){let m=S();n(0," Tem certeza que deseja excluir: "),t(1,"b"),n(2),i(),t(3,"div",40)(4,"a",41),n(5,"Cancelar"),i(),t(6,"button",42),c("click",function(){p(m);let r=_();return f(r.confirm())}),n(7," Excluir "),i()()}if(a&2){let m=_();l(2),x(m.excluir.nome)}}var De=(()=>{let s=class s{constructor(e,r,o){this.cursosService=e,this.toastr=r,this.sessionService=o,this.quant=10}ngOnInit(){this.sessionService.checkPermission("administrador"),this.subscription=this.cursosService.index().subscribe({next:e=>{this.data$=e,this.temp=e}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.cursosService.index().subscribe({next:e=>{this.data$=e}})}editar(e){this.child.editar(e)}delete(e){this.excluir=e}confirm(){this.cursosService.remove(this.excluir.id||0).subscribe({next:e=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:e=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var e=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(r=>r.abreviatura?r.nome.toLocaleLowerCase().indexOf(e)!==-1||r.abreviatura.toLocaleLowerCase().indexOf(e)!==-1||!e:r.nome.toLocaleLowerCase().indexOf(e)!==-1||!e)}}};s.\u0275fac=function(r){return new(r||s)(h(V),h(T),h(te))},s.\u0275cmp=g({type:s,selectors:[["app-cursos"]],viewQuery:function(r,o){if(r&1&&W(N,5),r&2){let d;$(d=z())&&(o.child=d.first)}},standalone:!0,features:[y],decls:64,vars:6,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Cursos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"fa","fa-plus"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage"],["by","id"],["by","nome"],["by","abreviatura"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"refresh"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"optionshover"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","ml-1"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(r,o){if(r&1){let d=S();t(0,"div",1),v(1,"app-title",2),t(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6)(6,"button",7),v(7,"i",8),i()(),t(8,"div",9)(9,"div",10)(10,"select",11),q("ngModelChange",function(C){return p(d),L(o.quant,C)||(o.quant=C),f(C)}),t(11,"option",12),n(12,"10"),i(),t(13,"option",13),n(14,"25"),i(),t(15,"option",14),n(16,"50"),i(),t(17,"option",15),n(18,"100"),i()(),t(19,"input",16),q("ngModelChange",function(C){return p(d),L(o.pesquisa,C)||(o.pesquisa=C),f(C)}),c("ngModelChange",function(){return p(d),f(o.pesquisar())}),i()()()(),t(20,"div",17)(21,"table",18,0)(23,"thead")(24,"tr")(25,"th")(26,"mfDefaultSorter",19),n(27,"#"),i()(),t(28,"th")(29,"mfDefaultSorter",20),n(30,"Nome"),i()(),t(31,"th")(32,"mfDefaultSorter",21),n(33,"Abreviatura"),i()(),t(34,"th"),n(35,"Op\xE7\xF5es"),i()()(),D(36,fe,4,1,"tbody"),t(37,"tfoot")(38,"tr")(39,"td",22)(40,"div",23),v(41,"mfBootstrapPaginator"),i()()()()()()()(),t(42,"div",24)(43,"div",25)(44,"div",26)(45,"div",27)(46,"h4",28),n(47,"Cadastrar"),i(),t(48,"button",29)(49,"span",30),n(50,"\xD7"),i()()(),t(51,"div",31)(52,"app-cursos-form",32),c("refresh",function(){return p(d),f(o.refresh())}),i()()()()(),t(53,"div",33)(54,"div",34)(55,"div",26)(56,"div",27)(57,"h4",28),n(58,"Excluir"),i(),t(59,"button",29)(60,"span",30),n(61,"\xD7"),i()()(),t(62,"div",31),D(63,he,8,1),i()()()()()}r&2&&(l(10),I("ngModel",o.quant),l(9),I("ngModel",o.pesquisa),l(2),b("mfData",o.data$)("mfRowsOnPage",o.quant),l(15),F(36,o.data$?36:-1),l(27),F(63,o.excluir?63:-1))},dependencies:[E,re,N,se,oe,ae,ne,M,X,Y,G,U,w,R]});let a=s;return a})();export{De as CursosComponent};
