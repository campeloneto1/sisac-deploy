import{a as Z}from"./chunk-3O7W2CGL.js";import{a as Y}from"./chunk-LBCJFU5D.js";import{a as W}from"./chunk-ATLJQ2UK.js";import{a as X}from"./chunk-NIBPGJ6J.js";import{a as U}from"./chunk-J6YYERK6.js";import{a as Q}from"./chunk-Y64AYFHZ.js";import{a as J}from"./chunk-A6GCQO25.js";import{h as L}from"./chunk-NFMIVN66.js";import{a as R}from"./chunk-I3SZ5FME.js";import{a as A}from"./chunk-HYOWEGV7.js";import{b as K}from"./chunk-UKCOEVIY.js";import"./chunk-HDKAZCIU.js";import{$b as q,Ca as P,Ea as _,Fa as s,I as k,O as u,Oa as t,P as p,Pb as x,Qa as m,Qb as D,Ra as I,Rb as N,Tb as H,Vb as B,Wb as G,Ya as T,_ as w,_a as h,_b as O,ac as z,ca as o,cb as g,da as b,eb as V,kb as $,l as F,la as f,na as c,rb as M,sa as v,sb as j,wa as l,xa as i,ya as C}from"./chunk-OWJSVT4P.js";var y=n=>({active:n}),S=n=>({"active show":n});function le(n,d){if(n&1){let e=P();l(0,"div",1)(1,"div",3)(2,"ul",4)(3,"li",5)(4,"a",6),t(5,"Ve\xEDculo"),i()(),l(6,"li",5)(7,"a",7),t(8,"Destino"),i()(),l(9,"li",5)(10,"a",8),t(11,"Observa\xE7\xF5es"),i()()()(),l(12,"div",9)(13,"form",10)(14,"div",11)(15,"div",12)(16,"div",2),C(17,"input-select",13),i(),l(18,"div",14)(19,"button",15),_("click",function(){u(e);let a=s();return p(a.proximo())}),t(20,"Pr\xF3ximo"),i()()(),l(21,"div",16)(22,"div",2),C(23,"input-select",17),i(),l(24,"div",14)(25,"button",15),_("click",function(){u(e);let a=s();return p(a.proximo())}),t(26,"Pr\xF3ximo"),i()()(),l(27,"div",18)(28,"div",2)(29,"input-select",19),_("ngModelChange",function(){u(e);let a=s();return p(a.getEstados())}),i(),l(30,"input-select",20),_("ngModelChange",function(){u(e);let a=s();return p(a.getCidades())}),i(),C(31,"input-select",21),i(),l(32,"div",22)(33,"button",23),_("click",function(){u(e);let a=s();return p(a.anterior())}),t(34," Anterior "),i(),l(35,"button",15),_("click",function(){u(e);let a=s();return p(a.proximo())}),t(36,"Pr\xF3ximo"),i()()(),l(37,"div",24)(38,"div",25),C(39,"input-textarea",26),i(),l(40,"div",27)(41,"button",23),_("click",function(){u(e);let a=s();return p(a.anterior())}),t(42," Anterior "),i(),l(43,"button",15),_("click",function(){u(e);let a=s();return p(a.cadastrar())}),t(44," Cadastrar "),i()()()()()()()}if(n&2){let e=s();o(4),c("ngClass",h(17,y,e.form.value.etapa===2)),o(3),c("ngClass",h(19,y,e.form.value.etapa===3)),o(3),c("ngClass",h(21,y,e.form.value.etapa===4)),o(3),c("formGroup",e.form),o(2),c("ngClass",h(23,S,e.form.value.etapa===1)),o(2),c("data$",e.policiais$),o(2),c("disabled",!e.form.value.policial),o(2),c("ngClass",h(25,S,e.form.value.etapa===2)),o(2),c("data$",e.veiculos$),o(2),c("disabled",!e.form.value.veiculo),o(2),c("ngClass",h(27,S,e.form.value.etapa===3)),o(2),c("data$",e.paises$),o(),c("data$",e.estados$),o(),c("data$",e.cidades$),o(4),c("disabled",!e.form.value.cidade),o(2),c("ngClass",h(29,S,e.form.value.etapa===4)),o(6),c("disabled",e.form.invalid)}}function re(n,d){n&1&&t(0," Emprestimo realizado com sucesso ")}function ce(n,d){n&1&&t(0," Devolu\xE7\xE3o realizado com sucesso ")}function se(n,d){n&1&&t(0," Org\xE2nico ")}function de(n,d){n&1&&t(0," Locado ")}function me(n,d){if(n&1&&(l(0,"div",32)(1,"b"),t(2,"Placa Especial:"),i(),t(3),i()),n&2){let e=s(2);o(3),m(" ",e.veiculoemprestado.veiculo.placa_especial," ")}}function ue(n,d){if(n&1&&(l(0,"div",32)(1,"b"),t(2,"KM Final:"),i(),t(3),i()),n&2){let e=s(2);o(3),m(" ",e.veiculoemprestado.km_final," ")}}function pe(n,d){if(n&1&&(l(0,"div",32)(1,"b"),t(2,"Data Final:"),i(),t(3),g(4,"date"),i()),n&2){let e=s(2);o(3),m(" ",V(4,1,e.veiculoemprestado.data_final,"dd/MM/yyyy HH:mm")," ")}}function ve(n,d){if(n&1&&(l(0,"div",33)(1,"div",34)(2,"b"),t(3,"Observa\xE7\xF5es:"),i(),C(4,"div",35),i()()),n&2){let e=s(2);o(4),c("innerHtml",e.veiculoemprestado.observacoes,w)}}function _e(n,d){if(n&1){let e=P();l(0,"div",33)(1,"button",36),_("click",function(){u(e);let a=s(2);return p(a.devolver())}),t(2,"Devolver"),i()()}}function xe(n,d){if(n&1&&(l(0,"div",2)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h3",31),f(5,re,1,0)(6,ce,1,0),i()(),l(7,"div",9)(8,"div",2)(9,"div",32)(10,"b"),t(11,"Marca:"),i(),t(12),i(),l(13,"div",32)(14,"b"),t(15,"Modelo:"),i(),t(16),i(),l(17,"div",32)(18,"b"),t(19,"Propriet\xE1rio:"),i(),f(20,se,1,0)(21,de,1,0),i(),l(22,"div",32)(23,"b"),t(24,"Cor:"),i(),t(25),i()(),l(26,"div",2)(27,"div",32)(28,"b"),t(29,"Placa:"),i(),t(30),i(),f(31,me,4,1,"div",32),l(32,"div",32)(33,"b"),t(34,"KM Inicial:"),i(),t(35),i(),f(36,ue,4,1,"div",32),i(),l(37,"div",2)(38,"div",32)(39,"b"),t(40,"Cidade:"),i(),t(41),i(),l(42,"div",32)(43,"b"),t(44,"Data Inicial:"),i(),t(45),g(46,"date"),i(),f(47,pe,5,4,"div",32),i(),f(48,ve,5,1,"div",33)(49,_e,3,0,"div",33),i()()()()),n&2){let e=s();o(5),v(5,e.veiculoemprestado.data_final?6:5),o(7),m(" ",e.veiculoemprestado.veiculo.modelo.marca.nome," "),o(4),m(" ",e.veiculoemprestado.veiculo.modelo.nome," "),o(4),v(20,e.veiculoemprestado.veiculo.organico?20:21),o(5),m(" ",e.veiculoemprestado.veiculo.cor.nome," "),o(5),m(" ",e.veiculoemprestado.veiculo.placa," "),o(),v(31,e.veiculoemprestado.veiculo.placa_especial?31:-1),o(4),m(" ",e.veiculoemprestado.km_inicial," "),o(),v(36,e.veiculoemprestado.km_final?36:-1),o(5),I(" ",e.veiculoemprestado.cidade.nome,", ",e.veiculoemprestado.cidade.estado.nome," "),o(4),m(" ",V(46,15,e.veiculoemprestado.data_inicial,"dd/MM/yyyy HH:mm")," "),o(2),v(47,e.veiculoemprestado.data_final?47:-1),o(),v(48,e.veiculoemprestado.observacoes?48:-1),o(),v(49,e.veiculoemprestado.data_final?-1:49)}}function be(n,d){if(n&1&&(l(0,"div",37)(1,"b"),t(2,"Placa Especial:"),i(),t(3),i()),n&2){let e=s(2);o(3),m(" ",e.veiculoemprestado.veiculo.placa_especial," ")}}function fe(n,d){if(n&1){let e=P();l(0,"div",2)(1,"div",37)(2,"b"),t(3,"Marca:"),i(),t(4),i(),l(5,"div",37)(6,"b"),t(7,"Modelo:"),i(),t(8),i()(),l(9,"div",2)(10,"div",37)(11,"b"),t(12,"Placa:"),i(),t(13),i(),f(14,be,4,1,"div",37),l(15,"div",37)(16,"b"),t(17,"KM Inicial:"),i(),t(18),i()(),l(19,"form",38)(20,"div",2),C(21,"input-text",39),i(),l(22,"div",25),C(23,"input-textarea",26),i(),l(24,"div",40)(25,"a",41),_("click",function(){u(e);let a=s();return p(a.canceldev())}),t(26,"Cancelar"),i(),l(27,"button",42),_("click",function(){u(e);let a=s();return p(a.confirmardev())}),t(28," Cadastrar "),i()()()}if(n&2){let e=s();o(4),m(" ",e.veiculoemprestado.veiculo.modelo.marca.nome," "),o(4),m(" ",e.veiculoemprestado.veiculo.modelo.nome," "),o(5),m(" ",e.veiculoemprestado.veiculo.placa," "),o(),v(14,e.veiculoemprestado.veiculo.placa_especial?14:-1),o(4),m(" ",e.veiculoemprestado.km_inicial," "),o(),c("formGroup",e.formdev),o(2),c("min",e.veiculoemprestado.km_inicial),o(6),c("disabled",e.formdev.invalid)}}var Ne=(()=>{let d=class d{constructor(r,a,E,ee,ie,te,oe,ae,ne){this.formBuilder=r,this.toastr=a,this.policiaisService=E,this.sessionService=ee,this.veiculosService=ie,this.veiculosPoliciaisService=te,this.paisesService=oe,this.estadosService=ae,this.cidadesService=ne}ngOnInit(){this.form=this.formBuilder.group({id:[null],veiculo:[null,x.compose([x.required])],policial:[null],etapa:[2],data_inicial:[null],data_final:[null],km_inicial:[null],km_final:[null],observacoes:[null],pais:[null,x.compose([x.required])],estado:[null,x.compose([x.required])],cidade:[null,x.compose([x.required])]}),this.formdev=this.formBuilder.group({id:[null],km_final:[null,x.compose([x.required])],observacoes:[null]}),this.subscription3=this.veiculosPoliciaisService.veiculoPolicial().subscribe({next:r=>{r?(this.exibir=2,this.veiculoemprestado=r):this.exibir=1}}),this.user=this.sessionService.getUser(),this.subscription=this.veiculosService.disponiveis().subscribe({next:r=>{r.forEach(a=>{a.placa_especial?a.nome=`${a.modelo.marca.nome} ${a.modelo.nome}, Placa: ${a.placa}, Placa Esp. ${a.placa_especial}`:a.nome=`${a.modelo.marca.nome} ${a.modelo.nome}, Placa: ${a.placa}`}),this.veiculos$=F(r)}}),this.paises$=this.paisesService.index()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe(),this.subscription3&&this.subscription3.unsubscribe(),this.subscription4&&this.subscription4.unsubscribe()}reset(){this.form.reset()}proximo(){this.form.get("etapa")?.patchValue(this.form.value.etapa+1)}anterior(){this.form.get("etapa")?.patchValue(this.form.value.etapa-1)}cadastrar(){this.user.policial&&(this.form.get("policial")?.patchValue(this.user.policial.id),this.subscription4=this.veiculosPoliciaisService.create(this.form.value).subscribe({next:r=>{this.veiculosPoliciaisService.veiculoPolicial().subscribe({next:a=>{this.exibir=2,this.veiculoemprestado=a}})},error:r=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}))}getEstados(){this.estados$=this.estadosService.wherePais(this.form.get("pais")?.value)}getCidades(){this.cidades$=this.cidadesService.whereEstado(this.form.get("estado")?.value)}devolver(){this.formdev.get("id")?.patchValue(this.veiculoemprestado.id),this.formdev.get("observacoes")?.patchValue(this.veiculoemprestado.observacoes),this.exibir=3}confirmardev(){this.veiculosPoliciaisService.receber(this.formdev.value).subscribe({next:r=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.formdev.reset(),this.exibir=2,this.veiculosPoliciaisService.find(this.veiculoemprestado.id||0).subscribe({next:a=>{this.veiculoemprestado=a}})},error:r=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}canceldev(){this.formdev.reset(),this.exibir=2}};d.\u0275fac=function(a){return new(a||d)(b(O),b(L),b(Q),b(K),b(Z),b(U),b(Y),b(X),b(W))},d.\u0275cmp=k({type:d,selectors:[["ng-component"]],standalone:!0,features:[T],decls:4,vars:3,consts:[[1,"content-wrapper","p-2"],[1,"card","card-primary","card-outline","card-outline-tabs"],[1,"row"],[1,"card-header","p-0","border-bottom-0"],["id","custom-tabs-four-tab","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["disabled","","id","veiculo-tab","data-bs-toggle","pill","href","#veiculo","role","tab","aria-controls","veiculo",1,"nav-link",3,"ngClass"],["disabled","","id","destino-tab","data-bs-toggle","pill","href","#destino","role","tab","aria-controls","destino",1,"nav-link",3,"ngClass"],["disabled","","id","observacoes-tab","data-bs-toggle","pill","href","#observacoes","role","tab","aria-controls","observacoes",1,"nav-link",3,"ngClass"],[1,"card-body"],[3,"formGroup"],["id","custom-tabs-four-tabContent",1,"tab-content"],["id","policial","role","tabpanel","aria-labelledby","policial-tab",1,"tab-pane","fade",3,"ngClass"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-12",3,"data$"],[1,"d-flex","justify-content-end"],[1,"btn","btn-primary",3,"click","disabled"],["id","veiculo","role","tabpanel","aria-labelledby","veiculo-tab",1,"tab-pane","fade",3,"ngClass"],["label","Ve\xEDculo","id","veiculo","formControlName","veiculo",1,"col-sm-12",3,"data$"],["id","destino","role","tabpanel","aria-labelledby","destino-tab",1,"tab-pane","fade",3,"ngClass"],["label","Pa\xEDs","id","pais","formControlName","pais",1,"col-sm-12",3,"ngModelChange","data$"],["label","Estado","id","estado","formControlName","estado",1,"col-sm-12",3,"ngModelChange","data$"],["label","Cidade","id","cidade","formControlName","cidade",1,"col-sm-12",3,"data$"],[1,"d-flex","justify-content-between"],[1,"btn","btn-danger",3,"click"],["id","observacoes","role","tabpanel","aria-labelledby","observacoes-tab",1,"tab-pane","fade",2,"height","450px",3,"ngClass"],[1,"row",2,"height","350px"],["formControlName","observacoes","label","Observa\xE7\xF5es","id","observacoes",1,"col-sm-12"],[1,"d-flex","justify-content-between","mt-5"],[1,"col-sm-12"],[1,"card","card-success"],[1,"card-header"],[1,"card-title"],[1,"col-sm-3"],[1,"row","mt-3"],[1,"col-sm-12","text-justify"],[3,"innerHtml"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"col-sm-4"],[1,"mt-3",3,"formGroup"],["formControlName","km_final","label","KM Final","id","km_final","tipo","number",1,"col-sm-2",3,"min"],[1,"d-flex","justify-content-end","mt-5"],[1,"btn","btn-link","text-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(a,E){a&1&&(l(0,"div",0),f(1,le,45,31,"div",1)(2,xe,50,18,"div",2)(3,fe,29,8),i()),a&2&&(o(),v(1,E.exibir===1?1:-1),o(),v(2,E.exibir===2?2:-1),o(),v(3,E.exibir===3?3:-1))},dependencies:[j,$,M,q,H,D,N,z,B,G,A,R,J]});let n=d;return n})();export{Ne as VeiculosPoliciaisFormPolicial};
