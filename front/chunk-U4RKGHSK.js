import{a as k}from"./chunk-JKRXANFS.js";import{a as de}from"./chunk-P4DI7BWX.js";import{h as F}from"./chunk-NFMIVN66.js";import{a as ae,b as le,c as se,d as me}from"./chunk-AICVXWQ6.js";import{a as re}from"./chunk-I3SZ5FME.js";import{a as oe}from"./chunk-HYOWEGV7.js";import{a as ne}from"./chunk-3HEW5RTP.js";import{b as ie}from"./chunk-UKCOEVIY.js";import"./chunk-HDKAZCIU.js";import{$b as V,Ca as w,Ea as f,Fa as _,I as y,Ka as B,La as W,Ma as z,Na as A,Nb as Q,O as h,Oa as n,P as v,Pa as C,Pb as c,Qb as T,Rb as R,Sb as H,Tb as J,Ua as I,Va as L,Vb as K,W as q,Wa as O,Wb as U,Xb as X,Ya as E,Yb as Y,Za as G,Zb as Z,_b as ee,ac as te,ca as s,da as u,la as g,na as x,sa as S,sb as M,ta as j,ua as $,va as P,wa as e,xa as i,ya as p}from"./chunk-OWJSVT4P.js";function he(a,l){if(a&1&&p(0,"input-select",2),a&2){let m=_();x("data$",m.marcas$)}}var N=(()=>{let l=class l{constructor(t,r,o,d){this.formBuilder=t,this.modelosService=r,this.marcasService=o,this.toastr=d,this.refresh=new q}ngOnInit(){this.form=this.formBuilder.group({id:[null],nome:[null,c.compose([c.required,c.minLength(5),c.maxLength(100)])],abreviatura:[null,c.compose([c.minLength(2),c.maxLength(5)])],marca:[null,c.compose([c.required])]}),this.marcas$=this.marcasService.index()}cadastrar(){this.form.value.id?this.modelosService.update(this.form.value.id,this.form.value).subscribe({next:t=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:t=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.modelosService.create(this.form.value).subscribe({next:t=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:t=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}editar(t){this.form.patchValue(t),this.form.get("marca")?.patchValue(t.marca.id)}};l.\u0275fac=function(r){return new(r||l)(u(ee),u(k),u(de),u(F))},l.\u0275cmp=y({type:l,selectors:[["app-modelos-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[E],decls:10,vars:3,consts:[[3,"formGroup"],[1,"row"],["label","Marca","id","marca","formControlName","marca",1,"col-sm-2",3,"data$"],["formControlName","nome","label","Nome","id","nome","tipo","text",1,"col-sm-4"],["formControlName","abreviatura","label","Abreviatura","id","abreviatura","tipo","text",1,"col-sm-2"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"]],template:function(r,o){r&1&&(e(0,"form",0)(1,"div",1),g(2,he,1,1,"input-select",2),p(3,"input-text",3)(4,"input-text",4),i(),e(5,"div",5)(6,"a",6),f("click",function(){return o.form.reset()}),n(7,"Cancelar"),i(),e(8,"button",7),f("click",function(){return o.cadastrar()}),n(9,"Cadastrar"),i()()()),r&2&&(x("formGroup",o.form),s(2),S(2,o.marcas$?2:-1),s(6),x("disabled",o.form.invalid))},dependencies:[M,V,J,T,R,te,K,U,oe,re]});let a=l;return a})();var ve=()=>[5,10,25];function _e(a,l){if(a&1){let m=w();e(0,"tr",37)(1,"td"),n(2),i(),e(3,"td"),n(4),i(),e(5,"td"),n(6),i(),e(7,"td"),n(8),i(),e(9,"td")(10,"a",38),f("click",function(){let r=h(m).$implicit,o=_(2);return v(o.editar(r))}),p(11,"i",39),i(),e(12,"a",40),f("click",function(){let r=h(m).$implicit,o=_(2);return v(o.delete(r))}),p(13,"i",41),i()()()}if(a&2){let m=l.$implicit;s(2),C(m.id),s(2),C(m.marca.nome),s(2),C(m.nome),s(2),C(m.abreviatura)}}function be(a,l){a&1&&(e(0,"tr")(1,"td",23),n(2,"Sem informa\xE7\xE3o"),i()())}function xe(a,l){if(a&1&&(e(0,"tbody"),$(1,_e,14,4,"tr",37,j,!1,be,3,0,"tr"),i()),a&2){_();let m=A(22);s(),P(m.data)}}function Ce(a,l){if(a&1){let m=w();n(0," Tem certeza que deseja excluir: "),e(1,"b"),n(2),i(),e(3,"div",42)(4,"a",43),n(5,"Cancelar"),i(),e(6,"button",44),f("click",function(){h(m);let r=_();return v(r.confirm())}),n(7," Excluir "),i()()}if(a&2){let m=_();s(2),C(m.excluir.nome)}}var je=(()=>{let l=class l{constructor(t,r,o){this.modelosService=t,this.toastr=r,this.sessionService=o,this.quant=10}ngOnInit(){this.sessionService.checkPermission("administrador"),this.subscription=this.modelosService.index().subscribe({next:t=>{this.data$=t,this.temp=t}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.modelosService.index().subscribe({next:t=>{this.data$=t}})}editar(t){this.child.editar(t)}delete(t){this.excluir=t}confirm(){this.modelosService.remove(this.excluir.id||0).subscribe({next:t=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:t=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var t=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(r=>r.nome.toLocaleLowerCase().indexOf(t)!==-1||r.abreviatura?.toLocaleLowerCase().indexOf(t)!==-1||r.marca.nome.toLocaleLowerCase().indexOf(t)!==-1||r.marca.abreviatura?.toLocaleLowerCase().indexOf(t)!==-1||!t)}}};l.\u0275fac=function(r){return new(r||l)(u(k),u(F),u(ie))},l.\u0275cmp=y({type:l,selectors:[["app-modelos"]],viewQuery:function(r,o){if(r&1&&B(N,5),r&2){let d;W(d=z())&&(o.child=d.first)}},standalone:!0,features:[E],decls:67,vars:8,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Modelos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"fa","fa-plus"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage"],["by","id"],["by","marca.nome"],["by","nome"],["by","abreviatura"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],[3,"rowsOnPageSet"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"refresh"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"optionshover"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","ml-1"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(r,o){if(r&1){let d=w();e(0,"div",1),p(1,"app-title",2),e(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6)(6,"button",7),p(7,"i",8),i()(),e(8,"div",9)(9,"div",10)(10,"select",11),O("ngModelChange",function(b){return h(d),L(o.quant,b)||(o.quant=b),v(b)}),e(11,"option",12),n(12,"10"),i(),e(13,"option",13),n(14,"25"),i(),e(15,"option",14),n(16,"50"),i(),e(17,"option",15),n(18,"100"),i()(),e(19,"input",16),O("ngModelChange",function(b){return h(d),L(o.pesquisa,b)||(o.pesquisa=b),v(b)}),f("ngModelChange",function(){return h(d),v(o.pesquisar())}),i()()()(),e(20,"div",17)(21,"table",18,0)(23,"thead")(24,"tr")(25,"th")(26,"mfDefaultSorter",19),n(27,"#"),i()(),e(28,"th")(29,"mfDefaultSorter",20),n(30,"Marca"),i()(),e(31,"th")(32,"mfDefaultSorter",21),n(33,"Nome"),i()(),e(34,"th")(35,"mfDefaultSorter",22),n(36,"Abreviatura"),i()(),e(37,"th"),n(38,"Op\xE7\xF5es"),i()()(),g(39,xe,4,1,"tbody"),e(40,"tfoot")(41,"tr")(42,"td",23)(43,"div",24),p(44,"mfBootstrapPaginator",25),i()()()()()()()(),e(45,"div",26)(46,"div",27)(47,"div",28)(48,"div",29)(49,"h4",30),n(50,"Cadastrar"),i(),e(51,"button",31)(52,"span",32),n(53,"\xD7"),i()()(),e(54,"div",33)(55,"app-modelos-form",34),f("refresh",function(){return h(d),v(o.refresh())}),i()()()()(),e(56,"div",35)(57,"div",36)(58,"div",28)(59,"div",29)(60,"h4",30),n(61,"Excluir"),i(),e(62,"button",31)(63,"span",32),n(64,"\xD7"),i()()(),e(65,"div",33),g(66,Ce,8,1),i()()()()()}r&2&&(s(10),I("ngModel",o.quant),s(9),I("ngModel",o.pesquisa),s(2),x("mfData",o.data$)("mfRowsOnPage",o.quant),s(18),S(39,o.data$?39:-1),s(5),x("rowsOnPageSet",G(7,ve)),s(22),S(66,o.excluir?66:-1))},dependencies:[M,ne,N,me,ae,se,le,V,Y,Z,Q,X,T,H]});let a=l;return a})();export{je as ModelosComponent};
