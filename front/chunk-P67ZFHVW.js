import{h as P}from"./chunk-NFMIVN66.js";import{a as B}from"./chunk-HYOWEGV7.js";import{a as T,b as f}from"./chunk-UKCOEVIY.js";import{a as q}from"./chunk-HDKAZCIU.js";import{$b as G,C as b,Ea as C,Eb as l,F as x,I,Kb as d,Mb as j,Oa as m,Pb as o,Qb as M,Rb as w,Tb as E,Vb as L,Wb as A,Xa as y,Ya as N,_b as D,ac as R,ca as p,da as s,f as g,na as u,sb as k,vb as F,wa as i,xa as a,ya as v}from"./chunk-OWJSVT4P.js";var V=T.url,h=(()=>{let t=class t{constructor(e){this.http=e}entrar(e){return this.http.post(`${V}/auth/login`,e)}profile(e){return this.http.post(`${V}/auth/profile`,e)}};t.\u0275fac=function(r){return new(r||t)(x(F))},t.\u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var me=(()=>{let t=class t{constructor(e,r,c,S,O,U){this.formBuilder=e,this.authService=r,this.sessionService=c,this.storageService=S,this.router=O,this.toastr=U}ngOnInit(){this.form=this.formBuilder.group({cpf:["",o.compose([o.required,o.minLength(11),o.maxLength(11)])],password:["",o.compose([o.required,o.minLength(6)])],lembrarme:[""]})}entrar(){return g(this,null,function*(){this.form.value.lembrarme&&localStorage.setItem("usuario",this.form.value.cpf),this.authService.entrar(this.form.value).subscribe({next:e=>{this.sessionService.setSession(e.user,e.access_token),this.storageService.setItem("user",JSON.stringify(e.user)),this.storageService.setItem("token",e.access_token),this.storageService.getItem("url")?this.router.navigate([this.storageService.getItem("url")]):this.router.navigate(["Inicio"])},error:e=>{this.toastr.error("Usu\xE1rio ou senha incorreto!")}})})}};t.\u0275fac=function(r){return new(r||t)(s(D),s(h),s(f),s(d),s(l),s(P))},t.\u0275cmp=I({type:t,selectors:[["app-auth"]],standalone:!0,features:[y([h,f,d,l,q()]),N],decls:25,vars:3,consts:[[1,"login-page"],[1,"login-box"],[1,"card"],[1,"card-header","text-center"],[1,"h1"],[1,"card-body"],[1,"login-box-msg"],[3,"ngSubmit","formGroup"],["formControlName","cpf","mascara","000.000.000-00","label","CPF","tipo","text","id","cpf",3,"autofocus"],["formControlName","password","label","Senha","tipo","password","id","password"],[1,"row"],[1,"col-8"],[1,"icheck-primary"],["type","checkbox","formControlName","lembrarme","id","remember"],["for","remember"],[1,"col-4"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"mb-1"],["href","forgot-password.html"]],template:function(r,c){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4)(5,"b"),m(6,"SISAC"),a()()(),i(7,"div",5)(8,"p",6),m(9,"Informe usu\xE1rio e senha para entrar"),a(),i(10,"form",7),C("ngSubmit",function(){return c.entrar()}),v(11,"input-text",8)(12,"input-text",9),i(13,"div",10)(14,"div",11)(15,"div",12),v(16,"input",13),i(17,"label",14),m(18," Lembrar-Me "),a()()(),i(19,"div",15)(20,"button",16),m(21," Entrar "),a()()()(),i(22,"p",17)(23,"a",18),m(24,"Esqueci minha senha"),a()()()()()()),r&2&&(p(10),u("formGroup",c.form),p(),u("autofocus",!0),p(9),u("disabled",c.form.invalid))},dependencies:[k,G,E,j,M,w,R,L,A,B]});let n=t;return n})();export{me as AuthComponent};
