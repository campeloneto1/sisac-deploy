import{a as F}from"./chunk-ZQDW34BD.js";import{a as be}from"./chunk-Q44EJ4QT.js";import{a as xe}from"./chunk-2IJB273A.js";import"./chunk-TNOIS3Y3.js";import{h as V}from"./chunk-NFMIVN66.js";import{a as fe,b as _e,c as Ce,d as he}from"./chunk-AICVXWQ6.js";import{a as ue}from"./chunk-I3SZ5FME.js";import{a as ce}from"./chunk-HYOWEGV7.js";import{a as pe}from"./chunk-3HEW5RTP.js";import{b as se}from"./chunk-4366GPH2.js";import{a as de,d as me}from"./chunk-HDKAZCIU.js";import{$b as L,Ca as y,Ea as _,Fa as c,I as D,Ka as z,La as Q,Ma as R,Na as A,Nb as X,O as h,Oa as a,P as x,Pa as u,Pb as C,Qa as H,Qb as I,Ra as U,Rb as Y,Sb as Z,Tb as ee,Ua as k,Va as O,Vb as te,W as j,Wa as $,Wb as ie,Xa as J,Xb as oe,Ya as M,Yb as ae,Zb as re,_b as ne,ac as le,ca as s,cb as w,da as p,eb as P,l as B,la as S,na as g,rb as K,sa as b,sb as T,ta as q,ua as G,va as W,wa as e,xa as t,ya as f}from"./chunk-OWJSVT4P.js";var N=(()=>{let d=class d{constructor(i,o,n,m,E){this.formBuilder=i,this.policiaisCursosService=o,this.policiaisService=n,this.cursosService=m,this.toastr=E,this.refresh=new j}ngOnInit(){this.form=this.formBuilder.group({id:[null],policial:[null,C.compose([C.required])],curso:[null,C.compose([C.required])],data_inicial:[null,C.compose([C.required])],data_final:[null,C.compose([C.required])],boletim:[null],carga_horaria:[null]}),this.subscription=this.policiaisService.disponiveis().subscribe({next:i=>{i.forEach(o=>{o.numeral?o.nome=`${o.graduacao.abreviatura} ${o.numeral} ${o.nome_guerra}, ${o.matricula}`:o.nome=`${o.graduacao.abreviatura} ${o.nome_guerra}, ${o.matricula}`}),this.policiais$=B(i)}}),this.cursos$=this.cursosService.index()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cadastrar(){this.form.value.id?this.policiaisCursosService.update(this.form.value.id,this.form.value).subscribe({next:i=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:i=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.policiaisCursosService.create(this.form.value).subscribe({next:i=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:i=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}editar(i){this.form.patchValue(i),this.form.get("policial")?.patchValue(i.policial.id),this.form.get("curso")?.patchValue(i.curso.id)}};d.\u0275fac=function(o){return new(o||d)(p(ne),p(F),p(xe),p(be),p(V))},d.\u0275cmp=D({type:d,selectors:[["app-policiais-cursos-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[M],decls:14,vars:4,consts:[[3,"formGroup"],[1,"row"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-4",3,"data$"],["label","Curso","id","curso","formControlName","curso",1,"col-sm-4",3,"data$"],["formControlName","data_inicial","label","Data Inicial","id","data_inicial","tipo","date",1,"col-sm-2"],["formControlName","data_final","label","Data Final","id","data_final","tipo","date",1,"col-sm-2"],["formControlName","carga_horaria","label","Carga Horaria","id","carga_horaria","tipo","number",1,"col-sm-2"],["formControlName","boletim","label","Boletim","id","boletim","tipo","text",1,"col-sm-2"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"]],template:function(o,n){o&1&&(e(0,"form",0)(1,"div",1),f(2,"input-select",2)(3,"input-select",3),t(),e(4,"div",1),f(5,"input-text",4)(6,"input-text",5)(7,"input-text",6)(8,"input-text",7),t(),e(9,"div",8)(10,"a",9),_("click",function(){return n.form.reset()}),a(11,"Cancelar"),t(),e(12,"button",10),_("click",function(){return n.cadastrar()}),a(13,"Cadastrar"),t()()()),o&2&&(g("formGroup",n.form),s(2),g("data$",n.policiais$),s(),g("data$",n.cursos$),s(9),g("disabled",n.form.invalid))},dependencies:[T,L,ee,I,Y,le,te,ie,ce,ue]});let r=d;return r})();function ye(r,d){r&1&&(e(0,"button",7),f(1,"i",42),t())}function we(r,d){if(r&1&&(a(0),w(1,"mask")),r&2){let l=c().$implicit;u(P(1,1,l.policial.numeral,"00.000"))}}function Pe(r,d){if(r&1&&a(0),r&2){let l=c().$implicit;H(" ",l.carga_horaria,"h ")}}function De(r,d){if(r&1){let l=y();e(0,"a",46),_("click",function(){h(l);let o=c().$implicit,n=c(2);return x(n.editar(o))}),f(1,"i",47),t()}}function Me(r,d){if(r&1){let l=y();e(0,"a",48),_("click",function(){h(l);let o=c().$implicit,n=c(2);return x(n.delete(o))}),f(1,"i",49),t()}}function Te(r,d){if(r&1&&(e(0,"tr",43)(1,"td"),a(2),t(),e(3,"td"),a(4),t(),e(5,"td"),a(6),t(),e(7,"td"),S(8,we,2,4),t(),e(9,"td"),a(10),t(),e(11,"td"),a(12),w(13,"mask"),t(),e(14,"td"),a(15),t(),e(16,"td"),a(17),w(18,"date"),t(),e(19,"td"),a(20),w(21,"date"),t(),e(22,"td"),S(23,Pe,1,1),t(),e(24,"td"),a(25),t(),e(26,"td"),S(27,De,2,0,"a",44)(28,Me,2,0,"a",45),t()()),r&2){let l=d.$implicit,i=c(2);s(2),u(l.id),s(2),U("",l.policial.setor.subunidade.abreviatura," - ",l.policial.setor.subunidade.unidade.abreviatura,""),s(2),u(l.policial.graduacao.nome),s(2),b(8,l.policial.numeral?8:-1),s(2),u(l.policial.nome_guerra),s(2),u(P(13,14,l.policial.matricula,"000.000-0-A")),s(3),u(l.curso.nome),s(2),u(P(18,17,l.data_inicial,"dd/MM/yyyy")),s(3),u(P(21,20,l.data_final,"dd/MM/yyyy")),s(3),b(23,l.carga_horaria?23:-1),s(2),u(l.boletim),s(2),b(27,i.user.perfil.policiais_cursos_edt?27:-1),s(),b(28,i.user.perfil.policiais_cursos_del?28:-1)}}function Ie(r,d){r&1&&(e(0,"tr")(1,"td",29),a(2,"Sem informa\xE7\xE3o"),t()())}function Le(r,d){if(r&1&&(e(0,"tbody"),G(1,Te,29,23,"tr",43,q,!1,Ie,3,0,"tr"),t()),r&2){c();let l=A(21);s(),W(l.data)}}function Ve(r,d){if(r&1){let l=y();a(0," Tem certeza que deseja excluir: "),e(1,"b"),a(2),t(),e(3,"div",50)(4,"a",51),a(5,"Cancelar"),t(),e(6,"button",52),_("click",function(){h(l);let o=c();return x(o.confirm())}),a(7," Excluir "),t()()}if(r&2){let l=c();s(2),u(l.excluir.policial.nome)}}var it=(()=>{let d=class d{constructor(i,o,n){this.policiaisCursosService=i,this.toastr=o,this.sessionService=n,this.quant=10}ngOnInit(){this.user=this.sessionService.getUser(),this.sessionService.checkPermission("policiais_cursos"),this.subscription=this.policiaisCursosService.index().subscribe({next:i=>{this.data$=i,this.temp=i}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.policiaisCursosService.index().subscribe({next:i=>{this.data$=i}})}editar(i){this.child.editar(i)}delete(i){this.excluir=i}confirm(){this.policiaisCursosService.remove(this.excluir.id||0).subscribe({next:i=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:i=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var i=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(o=>o.policial.numeral?o.policial.numeral?.toLocaleLowerCase().indexOf(i)!==-1||o.policial.nome.toLocaleLowerCase().indexOf(i)!==-1||o.policial.nome_guerra.toLocaleLowerCase().indexOf(i)!==-1||o.policial.matricula.toLocaleLowerCase().indexOf(i)!==-1||o.policial.graduacao.nome.toLocaleLowerCase().indexOf(i)!==-1||o.curso.nome.toLocaleLowerCase().indexOf(i)!==-1||!i:o.policial.nome.toLocaleLowerCase().indexOf(i)!==-1||o.policial.nome_guerra.toLocaleLowerCase().indexOf(i)!==-1||o.policial.matricula.toLocaleLowerCase().indexOf(i)!==-1||o.policial.graduacao.nome.toLocaleLowerCase().indexOf(i)!==-1||o.curso.nome.toLocaleLowerCase().indexOf(i)!==-1||!i)}}};d.\u0275fac=function(o){return new(o||d)(p(F),p(V),p(se))},d.\u0275cmp=D({type:d,selectors:[["app-policiais-cursos"]],viewQuery:function(o,n){if(o&1&&z(N,5),o&2){let m;Q(m=R())&&(n.child=m.first)}},standalone:!0,features:[J([de()]),M],decls:87,vars:9,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Cursos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage","mfSortBy","mfSortOrder"],["by","id"],["by","policial.setor.subunidade.abreviatura"],["by","policial.graduacao.nome"],["by","policial.numeral"],["by","policial.nome_guerra"],["by","policial.matricula"],["by","curso.nome"],["by","data_inicial"],["by","data_final"],["by","carga_horaria"],["by","boletim"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"refresh"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"fa","fa-plus"],[1,"optionshover"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger","ml-1"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(o,n){if(o&1){let m=y();e(0,"div",1),f(1,"app-title",2),e(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6),S(6,ye,2,0,"button",7),t(),e(7,"div",8)(8,"div",9)(9,"select",10),$("ngModelChange",function(v){return h(m),O(n.quant,v)||(n.quant=v),x(v)}),e(10,"option",11),a(11,"10"),t(),e(12,"option",12),a(13,"25"),t(),e(14,"option",13),a(15,"50"),t(),e(16,"option",14),a(17,"100"),t()(),e(18,"input",15),$("ngModelChange",function(v){return h(m),O(n.pesquisa,v)||(n.pesquisa=v),x(v)}),_("ngModelChange",function(){return h(m),x(n.pesquisar())}),t()()()(),e(19,"div",16)(20,"table",17,0)(22,"thead")(23,"tr")(24,"th")(25,"mfDefaultSorter",18),a(26,"#"),t()(),e(27,"th")(28,"mfDefaultSorter",19),a(29,"Subunidade"),t()(),e(30,"th")(31,"mfDefaultSorter",20),a(32,"Gradua\xE7\xE3o"),t()(),e(33,"th")(34,"mfDefaultSorter",21),a(35,"Numeral"),t()(),e(36,"th")(37,"mfDefaultSorter",22),a(38,"Nome Guerra"),t()(),e(39,"th")(40,"mfDefaultSorter",23),a(41,"Matr\xEDcula"),t()(),e(42,"th")(43,"mfDefaultSorter",24),a(44,"Curso"),t()(),e(45,"th")(46,"mfDefaultSorter",25),a(47,"Data Inicial"),t()(),e(48,"th")(49,"mfDefaultSorter",26),a(50,"Data Final"),t()(),e(51,"th")(52,"mfDefaultSorter",27),a(53,"Carga Hor\xE1ria"),t()(),e(54,"th")(55,"mfDefaultSorter",28),a(56,"Boletim"),t()(),e(57,"th"),a(58,"Op\xE7\xF5es"),t()()(),S(59,Le,4,1,"tbody"),e(60,"tfoot")(61,"tr")(62,"td",29)(63,"div",30),f(64,"mfBootstrapPaginator"),t()()()()()()()(),e(65,"div",31)(66,"div",32)(67,"div",33)(68,"div",34)(69,"h4",35),a(70,"Cadastrar"),t(),e(71,"button",36)(72,"span",37),a(73,"\xD7"),t()()(),e(74,"div",38)(75,"app-policiais-cursos-form",39),_("refresh",function(){return h(m),x(n.refresh())}),t()()()()(),e(76,"div",40)(77,"div",41)(78,"div",33)(79,"div",34)(80,"h4",35),a(81,"Excluir"),t(),e(82,"button",36)(83,"span",37),a(84,"\xD7"),t()()(),e(85,"div",38),S(86,Ve,8,1),t()()()()()}o&2&&(s(6),b(6,n.user.perfil.policiais_cursos_cad?6:-1),s(3),k("ngModel",n.quant),s(9),k("ngModel",n.pesquisa),s(2),g("mfData",n.data$)("mfRowsOnPage",n.quant)("mfSortBy","id")("mfSortOrder","desc"),s(39),b(59,n.data$?59:-1),s(27),b(86,n.excluir?86:-1))},dependencies:[T,K,pe,N,he,fe,Ce,_e,L,ae,re,X,oe,I,Z,me]});let r=d;return r})();export{it as PoliciaisCursosComponent};
