import{a as Z}from"./chunk-LXIWSDD7.js";import{a as Y}from"./chunk-LTYLTL4N.js";import{a as X}from"./chunk-77XLGHWE.js";import{a as W}from"./chunk-7UROPAQM.js";import{a as Q}from"./chunk-R4NLVNIH.js";import{a as U}from"./chunk-I3SZ5FME.js";import{a as A}from"./chunk-HYOWEGV7.js";import{a as J}from"./chunk-3HEW5RTP.js";import{a as K,b as z}from"./chunk-4366GPH2.js";import"./chunk-HDKAZCIU.js";import{$b as G,C as E,Ea as F,F as b,Fa as O,I as y,Oa as i,Pa as c,Pb as v,Qb as V,Rb as R,Tb as w,Vb as H,Wb as B,Ya as P,_ as I,_b as q,ac as L,ca as n,cb as f,da as m,db as T,eb as h,l as x,la as _,na as p,pb as D,rb as j,sa as M,sb as k,ta as $,ua as C,va as g,vb as N,wa as e,xa as t,ya as u}from"./chunk-OWJSVT4P.js";var re=K.url,le="veiculos-oficinas",ee=(()=>{let o=class o{constructor(d){this.http=d}relatorio(d){return this.http.post(`${re}/${le}/relatorio`,d)}};o.\u0275fac=function(a){return new(a||o)(b(N))},o.\u0275prov=E({token:o,factory:o.\u0275fac,providedIn:"root"});let l=o;return l})();function de(l,o){if(l&1&&(e(0,"tr",17)(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),i(14),t(),e(15,"td"),i(16),f(17,"date"),t(),e(18,"td"),i(19),f(20,"date"),t(),e(21,"td"),i(22),t(),e(23,"td"),i(24),t()(),e(25,"tr",18)(26,"td",19),u(27,"div",20),t()()),l&2){let r=o.$implicit;n(2),c(r.id),n(2),c(r.veiculo.modelo.marca.nome),n(2),c(r.veiculo.modelo.nome),n(2),c(r.veiculo.placa),n(2),c(r.veiculo.placa_especial),n(2),c(r.oficina.nome),n(2),c(r.manutencao_tipo.nome),n(2),c(h(17,12,r.data_inicial,"dd/MM/yyyy HH:mm")),n(3),c(h(20,15,r.data_final,"dd/MM/yyyy HH:mm")),n(3),c(r.km_inicial),n(2),c(r.km_final),n(3),p("innerHTML",r.observacoes,I)}}function se(l,o){if(l&1&&(e(0,"table",16)(1,"thead")(2,"tr")(3,"th"),i(4,"#"),t(),e(5,"th"),i(6,"Marca"),t(),e(7,"th"),i(8,"Modelo"),t(),e(9,"th"),i(10,"Placa"),t(),e(11,"th"),i(12,"Placa Especial"),t(),e(13,"th"),i(14,"Oficina"),t(),e(15,"th"),i(16,"Manuten\xE7\xE3o"),t(),e(17,"th"),i(18,"Data Inicial"),t(),e(19,"th"),i(20,"Data Final"),t(),e(21,"th"),i(22,"KM Inicial"),t(),e(23,"th"),i(24,"KM Final"),t()()(),e(25,"tbody"),C(26,de,28,18,null,null,$),f(28,"async"),t()()),l&2){let r=O();n(26),g(T(28,0,r.data$))}}var ge=(()=>{let o=class o{constructor(d,a,s,S,te,ie,ne,ae){this.formBuilder=d,this.oficinasService=a,this.veiculosService=s,this.marcasService=S,this.modelosService=te,this.manutencoesTiposService=ie,this.veiculosOficinasRelService=ne,this.sessionService=ae}ngOnInit(){this.sessionService.checkPermission("relatorios"),this.form=this.formBuilder.group({oficina:[null],veiculo:[null],data_inicial:[null,v.compose([v.required])],data_final:[null,v.compose([v.required])],manutencao_tipo:[null],marca:[null],modelo:[null],subunidade:[null]}),this.oficinas$=this.oficinasService.index(),this.subscription=this.veiculosService.disponiveis().subscribe({next:d=>{d.forEach(a=>{a.placa_especial?a.nome=`${a.modelo.marca.nome} ${a.modelo.nome}, Placa: ${a.placa}, Placa Esp. ${a.placa_especial}`:a.nome=`${a.modelo.marca.nome} ${a.modelo.nome}, Placa: ${a.placa}`}),this.veiculos$=x(d)}}),this.marcas$=this.marcasService.index(),this.manutencoestipos$=this.manutencoesTiposService.index()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}getModelos(){this.modelos$=this.modelosService.whereMarca(this.form.value.marca)}pesquisar(){this.sessionService.getSubunidade()&&this.form.get("subunidade")?.patchValue(this.sessionService.getSubunidade()),this.data$=this.veiculosOficinasRelService.relatorio(this.form.value)}};o.\u0275fac=function(a){return new(a||o)(m(q),m(Y),m(Z),m(Q),m(W),m(X),m(ee),m(z))},o.\u0275cmp=y({type:o,selectors:[["app-veiculos-oficinas-rel"]],standalone:!0,features:[P],decls:22,vars:6,consts:[[1,"content-wrapper"],["titulo","Relat\xF3rio de Manuten\xE7\xE3o de Ve\xEDculos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title","noprint"],[1,"card-title","print"],[1,"card-body","table-responsive"],[1,"noprint",3,"formGroup"],[1,"row"],["formControlName","data_inicial","label","Data Inical maior ou igual a","id","data_inicial","tipo","date",1,"col-sm-2"],["formControlName","data_final","label","Data Inicial menor ou igual a","id","data_final","tipo","date",1,"col-sm-2"],["label","Ve\xEDculo","id","veiculo","formControlName","veiculo",1,"col-sm-3",3,"data$"],["label","Oficina","id","oficina","formControlName","oficina",1,"col-sm-3",3,"data$"],["label","Tipo de Manuten\xE7\xE3o","id","manutencao_tipo","formControlName","manutencao_tipo",1,"col-sm-2",3,"data$"],["type","button",1,"btn","btn-primary","btn-block",3,"click","disabled"],[1,"table","table-hover","table-head-fixed","text-wrap"],["data-widget","expandable-table","aria-expanded","false"],[1,"expandable-body","d-none"],["colspan","11"],[2,"display","none",3,"innerHTML"]],template:function(a,s){a&1&&(e(0,"div",0),u(1,"app-title",1),e(2,"section",2)(3,"div",3)(4,"div",4)(5,"h3",5),i(6,"Filtro"),t(),e(7,"h3",6),i(8,"Relat\xF3rio de Manuten\xE7\xE3o de Ve\xEDculos"),t()(),e(9,"div",7)(10,"form",8)(11,"div",9),u(12,"input-text",10)(13,"input-text",11),t(),e(14,"div",9),u(15,"input-select",12)(16,"input-select",13)(17,"input-select",14),t(),e(18,"div")(19,"button",15),F("click",function(){return s.pesquisar()}),i(20," Pesquisar "),t()()(),_(21,se,29,2,"table",16),t()()()()),a&2&&(n(10),p("formGroup",s.form),n(5),p("data$",s.veiculos$),n(),p("data$",s.oficinas$),n(),p("data$",s.manutencoestipos$),n(2),p("disabled",s.form.invalid),n(2),M(21,s.data$?21:-1))},dependencies:[k,D,j,J,G,w,V,R,L,H,B,A,U],styles:[".print[_ngcontent-%COMP%]{display:none}@media print{.noprint[_ngcontent-%COMP%]{display:none}.print[_ngcontent-%COMP%]{display:block}}"]});let l=o;return l})();export{ge as VeiculosOficinasRel};
