import{a as B}from"./chunk-6PPDGIQB.js";import{a as Oe}from"./chunk-Y64AYFHZ.js";import{a as ee}from"./chunk-A6GCQO25.js";import{h as T}from"./chunk-NFMIVN66.js";import{a as Z}from"./chunk-SFM735GE.js";import{a as Me,b as De,c as qe,d as Ne}from"./chunk-AICVXWQ6.js";import{a as Y}from"./chunk-I3SZ5FME.js";import{a as X}from"./chunk-HYOWEGV7.js";import{a as Fe}from"./chunk-3HEW5RTP.js";import{a as Te,b as K}from"./chunk-UKCOEVIY.js";import{a as ke,d as Ve}from"./chunk-HDKAZCIU.js";import{$b as I,C as _e,Ca as b,Ea as p,F as fe,Fa as d,Fb as be,I as y,Ia as ae,Ib as Se,Ka as H,La as J,Ma as U,Mb as ge,Na as he,Nb as ye,O as v,Oa as o,P as x,Pa as c,Pb as S,Qb as A,Ra as ve,Rb as D,Sb as we,Tb as q,Ua as ne,Va as re,Vb as N,W as k,Wa as oe,Wb as O,Xa as xe,Xb as $e,Ya as w,Yb as Ae,Zb as Ie,_a as me,_b as L,ac as j,ca as l,cb as Q,da as f,eb as G,f as ue,l as R,la as C,na as E,rb as Ee,sa as u,sb as $,ta as V,ua as F,va as M,vb as Ce,wa as t,xa as i,ya as h}from"./chunk-OWJSVT4P.js";function Qe(r,s){if(r&1){let n=b();t(0,"div",1)(1,"input-select",12),p("ngModelChange",function(){v(n);let e=d();return x(e.select())}),i(),h(2,"input-text",13),t(3,"div",14)(4,"button",15),p("click",function(){v(n);let e=d();return x(e.addArmamento())}),h(5,"i",16),i()()()}if(r&2){let n=d();l(),E("data$",n.armamentos$),l(),E("max",n.maxamon)("min",1),l(2),E("disabled",!n.form.value.armamento||!n.form.value.quantidade)}}function Ge(r,s){if(r&1){let n=b();t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td")(6,"i",18),p("click",function(){let e=v(n).$index,m=d(2);return x(m.removeArmamento(e))}),i()()()}if(r&2){let n=s.$implicit;l(2),c(n.armamento.serial),l(2),c(n.quantidade)}}function Pe(r,s){if(r&1&&(t(0,"div",1)(1,"table",17)(2,"thead")(3,"tr")(4,"th"),o(5,"Serial"),i(),t(6,"th"),o(7,"Quant."),i(),t(8,"th"),o(9,"Op\xE7\xF5es"),i()()(),t(10,"tbody"),F(11,Ge,7,2,"tr",null,V),i()()()),r&2){let n=d();l(11),M(n.armamentosselected)}}var de=(()=>{let s=class s{constructor(a,e,m,_,W,g){this.formBuilder=a,this.armamentosEmprestimosService=e,this.policiaisService=m,this.armamentosService=_,this.toastr=W,this.sessionService=g,this.armamentosselected=[],this.editando=!1,this.maxamon=1,this.refresh=new k}ngOnInit(){this.form=this.formBuilder.group({id:[null],policial:[null,S.compose([S.required])],armamento:[null],quantidade:[1,S.compose([S.min(1)])],observacoes:[null],cautela:[null],armamentos:[null],subunidade:[null]}),this.subscription=this.policiaisService.disponiveis().subscribe({next:a=>{a.forEach(e=>{e.numeral?e.nome=`${e.graduacao.abreviatura} ${e.numeral} ${e.nome_guerra}, ${e.matricula}`:e.nome=`${e.graduacao.abreviatura} ${e.nome_guerra}, ${e.matricula}`}),this.policiais$=R(a)}}),this.subscription2=this.armamentosService.disponiveis().subscribe({next:a=>{a.forEach(e=>{e.armamento_calibre?e.serial=`${e.armamento_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, ${e.armamento_calibre?.nome}, Disp: ${e.quantidade_disponivel}`:e.armamento_tamanho?e.serial=`${e.armamento_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, ${e.armamento_tamanho?.nome}, Disp: ${e.quantidade_disponivel}`:!e.armamento_tamanho&&!e.armamento_calibre&&(e.serial=`${e.armamento_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, Disp: ${e.quantidade_disponivel}`)}),this.armamentos$=R(a)}})}reset(){this.form.reset(),this.editando=!1,this.form.get("quantidade")?.patchValue(1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}cadastrar(){this.form.value.cautela!==!0&&this.form.get("cautela")?.patchValue(null),this.form.value.id?(delete this.form.value.armamentos,delete this.form.value.armamento,delete this.form.value.quantidade,this.armamentosEmprestimosService.update(this.form.value.id,this.form.value).subscribe({next:a=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:a=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})):(this.sessionService.getSubunidade()?this.form.get("subunidade")?.patchValue(this.sessionService.getSubunidade()):this.toastr.error("Selecione uma subunidade!"),this.form.get("armamentos")?.patchValue(this.armamentosselected),this.armamentosEmprestimosService.create(this.form.value).subscribe({next:a=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit(),this.armamentosselected=[]},error:a=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}))}select(){return ue(this,null,function*(){if(this.form.value.armamento){var a;yield this.armamentos$.subscribe(e=>{a=e.filter(m=>m.id==this.form.value.armamento)}),a&&(this.maxamon=a[0].quantidade_disponivel)}})}editar(a){this.editando=!0,this.form.patchValue(a),this.form.get("policial")?.patchValue(a.policial.id)}addArmamento(){if(this.form.value.quantidade>0){let a;this.armamentos$.subscribe(e=>{a=e.filter(m=>m.id==this.form.value.armamento)}),this.form.value.quantidade>a[0].quantidade_disponivel&&this.form.get("quantidade")?.patchValue(a[0].quantidade_disponivel),this.armamentosselected.push({armamentoId:this.form.value.armamento,armamento:a[0],quantidade:this.form.value.quantidade}),this.form.get("armamento")?.patchValue(null),this.form.get("quantidade")?.patchValue(1)}}removeArmamento(a){this.armamentosselected.splice(a,1)}};s.\u0275fac=function(e){return new(e||s)(f(L),f(B),f(Oe),f(Z),f(T),f(K))},s.\u0275cmp=y({type:s,selectors:[["app-armamentos-emprestimos-form"]],outputs:{refresh:"refresh"},standalone:!0,features:[w],decls:17,vars:5,consts:[[3,"formGroup"],[1,"row"],["label","Policial","id","policial","formControlName","policial",1,"col-sm-6",3,"data$"],[1,"col-sm-2"],[1,"form-check"],["type","checkbox","checked","","id","cautela","formControlName","cautela",1,"form-check-input"],["for","cautela",1,"form-check-label"],[1,"row",2,"height","350px"],["formControlName","observacoes","label","Observa\xE7\xF5es","id","observacoes",1,"col-sm-12"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click","disabled"],["label","Armamento","id","armamento","formControlName","armamento","optionname","serial",1,"col-sm-6",3,"ngModelChange","data$"],["formControlName","quantidade","label","Quantidade","id","quantidade","tipo","number",1,"col-sm-2",3,"max","min"],[1,"col-sm-2",2,"padding-top","30px"],[1,"btn","btn-primary",3,"click","disabled"],[1,"fa","fa-plus"],[1,"table","table-hover","table-head-fixed","text-nowrap"],["aria-hidden","true",1,"fa","fa-trash","text-danger","point",3,"click"]],template:function(e,m){e&1&&(t(0,"form",0)(1,"div",1),h(2,"input-select",2),t(3,"div",3)(4,"div",4),h(5,"input",5),t(6,"label",6),o(7,"Cautela"),i()()()(),C(8,Qe,6,4,"div",1)(9,Pe,13,0,"div",1),t(10,"div",7),h(11,"input-textarea",8),i(),t(12,"div",9)(13,"a",10),p("click",function(){return m.form.reset()}),o(14,"Cancelar"),i(),t(15,"button",11),p("click",function(){return m.cadastrar()}),o(16,"Cadastrar"),i()()()),e&2&&(E("formGroup",m.form),l(2),E("data$",m.policiais$),l(6),u(8,m.editando?-1:8),l(),u(9,m.armamentosselected&&!m.editando?9:-1),l(6),E("disabled",m.form.invalid))},dependencies:[$,I,q,ge,A,D,j,N,O,X,Y,ee]});let r=s;return r})();var P=Te.url,z="armamentos-emprestimos-itens",ie=(()=>{let s=class s{constructor(a){this.http=a}index(){return this.http.get(`${P}/${z}`)}find(a){return this.http.get(`${P}/${z}/${a}`)}create(a){return this.http.post(`${P}/${z}`,a)}update(a,e){return this.http.put(`${P}/${z}/${a}`,e)}remove(a){return this.http.delete(`${P}/${z}/${a}`)}};s.\u0275fac=function(e){return new(e||s)(fe(Ce))},s.\u0275prov=_e({token:s,factory:s.\u0275fac,providedIn:"root"});let r=s;return r})();var ce=(()=>{let s=class s{constructor(a,e,m,_){this.formBuilder=a,this.armamentosEmprestimosItensService=e,this.armamentosService=m,this.toastr=_,this.refresh=new k,this.cancel=new k}ngOnInit(){this.form=this.formBuilder.group({id:[null],armamento:[null,S.compose([S.required])],armamento_emprestimo:[this.armamento_emprestimo_id],quantidade:[1,S.compose([S.required,S.min(1)])]}),this.subscription=this.armamentosService.disponiveis().subscribe({next:a=>{a.forEach(e=>{e.armamento_calibre?e.serial=`${e.armamento_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, ${e.armamento_calibre?.nome}, Disp: ${e.quantidade_disponivel}`:e.armamento_tamanho?e.serial=`${e.armamento_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, ${e.armamento_tamanho?.nome}, Disp: ${e.quantidade_disponivel}`:!e.armamento_tamanho&&!e.armamento_calibre&&(e.serial=`${e.armamento_tipo.nome} ${e.modelo.marca.nome} ${e.modelo.nome} ${e.serial}, Disp: ${e.quantidade_disponivel}`)}),this.armamentos$=R(a)}})}reset(){this.form.reset(),this.form.get("quantidade")?.patchValue(1)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}cadastrar(){this.form.value.id?this.armamentosEmprestimosItensService.update(this.form.value.id,this.form.value).subscribe({next:a=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:a=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}}):this.armamentosEmprestimosItensService.create(this.form.value).subscribe({next:a=>{this.toastr.success("Cadastro realizado com sucesso!"),this.form.reset(),this.refresh.emit()},error:a=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}cancelar(){this.form.reset(),this.cancel.emit()}};s.\u0275fac=function(e){return new(e||s)(f(L),f(ie),f(Z),f(T))},s.\u0275cmp=y({type:s,selectors:[["app-armamentos-emprestimos-itens-form"]],inputs:{armamento_emprestimo_id:"armamento_emprestimo_id"},outputs:{refresh:"refresh",cancel:"cancel"},standalone:!0,features:[w],decls:9,vars:3,consts:[[3,"formGroup"],[1,"row"],["label","Armamento","id","armamento","formControlName","armamento","optionname","serial",1,"col-sm-6",3,"data$"],["formControlName","quantidade","label","Quantidade","id","quantidade","tipo","number",1,"col-sm-2"],[1,"d-flex","justify-content-end"],[1,"btn","btn-link","text-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(e,m){e&1&&(t(0,"form",0)(1,"div",1),h(2,"input-select",2)(3,"input-text",3),i(),t(4,"div",4)(5,"a",5),p("click",function(){return m.cancelar()}),o(6,"Cancelar"),i(),t(7,"button",6),p("click",function(){return m.cadastrar()}),o(8,"Cadastrar"),i()()()),e&2&&(E("formGroup",m.form),l(2),E("data$",m.armamentos$),l(5),E("disabled",m.form.invalid))},dependencies:[$,I,q,A,D,j,N,O,X,Y]});let r=s;return r})();function ze(r,s){if(r&1&&o(0),r&2){let n=d().$implicit;c(n.armamento.modelo.marca.nome)}}function We(r,s){if(r&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),C(6,ze,1,1),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),h(18,"input",7),i()()),r&2){let n=s.$implicit;l(2),c(n.id),l(2),c(n.armamento.armamento_tipo.nome),l(2),u(6,n.armamento.modelo.marca?6:-1),l(2),c(n.armamento.modelo.nome),l(2),c(n.armamento.armamento_calibre==null?null:n.armamento.armamento_calibre.nome),l(2),c(n.armamento.armamento_tamanho==null?null:n.armamento.armamento_tamanho.nome),l(2),c(n.armamento.serial),l(2),c(n.quantidade),l(2),ae("max",n.quantidade),ae("id",n.id),E("value",n.quantidade)}}var pe=(()=>{let s=class s{constructor(a,e,m){this.formBuilder=a,this.armamentosEmprestimosService=e,this.toastr=m,this.refresh=new k}ngOnInit(){this.form=this.formBuilder.group({id:[null],observacoes:[this.armamentoEmprestimo.observacoes],armamentos:[null]})}cadastrar(){var a=[];let e=document.querySelectorAll("#formdev input");Array.from(e).forEach(m=>{m.id&&a.push({id:m.id,quantidade:parseInt(m.value)})}),this.form.get("armamentos")?.patchValue(a),this.form.get("id")?.patchValue(this.armamentoEmprestimo.id),this.armamentosEmprestimosService.receber(this.form.value).subscribe({next:m=>{this.toastr.success("Edi\xE7\xE3o realizada com sucesso!"),this.form.reset(),this.refresh.emit()},error:m=>{this.toastr.error("Erro ao cadastrar, tente novamente mais tarde!")}})}};s.\u0275fac=function(e){return new(e||s)(f(L),f(B),f(T))},s.\u0275cmp=y({type:s,selectors:[["app-armamentos-emprestimos-form-receber"]],inputs:{armamentoEmprestimo:"armamentoEmprestimo"},outputs:{refresh:"refresh"},standalone:!0,features:[w],decls:32,vars:1,consts:[["id","formdev","name","formdev",3,"formGroup"],[1,"table","table-hover","table-head-fixed","text-nowrap"],[1,"row",2,"height","350px"],["formControlName","observacoes","label","Observa\xE7\xF5es","id","observacoes",1,"col-sm-12"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-danger"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","number","min","0",1,"form-control",3,"max","id","value"]],template:function(e,m){e&1&&(t(0,"form",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),o(5,"#"),i(),t(6,"th"),o(7,"Tipo"),i(),t(8,"th"),o(9,"Marca"),i(),t(10,"th"),o(11,"Modelo"),i(),t(12,"th"),o(13,"Calibre"),i(),t(14,"th"),o(15,"Tamanho"),i(),t(16,"th"),o(17,"Serial"),i(),t(18,"th"),o(19,"Quantidade"),i(),t(20,"th"),o(21,"Quant. Recebida"),i()()(),t(22,"tbody"),F(23,We,19,11,"tr",null,V),i()(),t(25,"div",2),h(26,"input-textarea",3),i(),t(27,"div",4)(28,"a",5),o(29,"Cancelar"),i(),t(30,"button",6),p("click",function(){return m.cadastrar()}),o(31," Receber "),i()()()),e&2&&(E("formGroup",m.form),l(23),M(m.armamentoEmprestimo.armamentos_emprestimos_itens))},dependencies:[$,I,q,A,D,j,N,O,ee]});let r=s;return r})();var He=r=>["/ArmamentosEmprestimosCautela",r],Je=r=>["/ArmamentosEmprestimosJustificativa",r];function Ue(r,s){if(r&1){let n=b();t(0,"button",41),p("click",function(){v(n);let e=d();return x(e.cadastrar())}),h(1,"i",42),i()}}function Ke(r,s){if(r&1&&(o(0),Q(1,"mask")),r&2){let n=d().$implicit;c(G(1,1,n.policial.numeral,"00.000"))}}function Xe(r,s){if(r&1&&(t(0,"a",46),h(1,"i",50),i()),r&2){let n=d(2).$implicit;E("routerLink",me(1,He,n.id))}}function Ye(r,s){if(r&1){let n=b();t(0,"a",51),p("click",function(){v(n);let e=d(2).$implicit,m=d(2);return x(m.devolver(e))}),h(1,"i",52),i()}}function Ze(r,s){if(r&1){let n=b();t(0,"a",53),p("click",function(){v(n);let e=d(2).$implicit,m=d(2);return x(m.editar(e))}),h(1,"i",54),i()}}function et(r,s){if(r&1){let n=b();t(0,"a",55),p("click",function(){v(n);let e=d(2).$implicit,m=d(2);return x(m.delete(e))}),h(1,"i",56),i()}}function tt(r,s){if(r&1&&C(0,Xe,2,3,"a",46)(1,Ye,2,0,"a",47)(2,Ze,2,0,"a",48)(3,et,2,0,"a",49),r&2){let n=d().$implicit,a=d(2);u(0,n.cautela?0:-1),l(),u(1,a.user.perfil.armamentos_emprestimos_cad?1:-1),l(),u(2,a.user.perfil.armamentos_emprestimos_edt?2:-1),l(),u(3,a.user.perfil.armamentos_emprestimos_del?3:-1)}}function it(r,s){if(r&1&&(t(0,"a",45),h(1,"i",50),i()),r&2){let n=d().$implicit;E("routerLink",me(1,Je,n.id))}}function at(r,s){if(r&1){let n=b();t(0,"tr",43)(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),o(6),i(),t(7,"td"),C(8,Ke,2,4),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),Q(13,"mask"),i(),t(14,"td"),o(15),Q(16,"date"),i(),t(17,"td")(18,"button",44),p("click",function(){let e=v(n).$implicit,m=d(2);return x(m.showArms(e))}),o(19," Armamentos "),i()(),t(20,"td"),o(21),Q(22,"date"),i(),t(23,"td"),C(24,tt,4,4)(25,it,2,3,"a",45),i()()}if(r&2){let n=s.$implicit;l(2),c(n.id),l(2),ve("",n.subunidade.abreviatura," - ",n.subunidade.unidade.abreviatura,""),l(2),c(n.policial.graduacao.nome),l(2),u(8,n.policial.numeral?8:-1),l(2),c(n.policial.nome_guerra),l(2),c(G(13,11,n.policial.matricula,"000.000-0-A")),l(3),c(G(16,14,n.data_emprestimo,"dd/MM/yyyy HH:mm")),l(6),c(G(22,17,n.data_devolucao,"dd/MM/yyyy HH:mm")),l(3),u(24,n.data_devolucao?-1:24),l(),u(25,n.data_devolucao?25:-1)}}function nt(r,s){r&1&&(t(0,"tr")(1,"td",26),o(2,"Sem informa\xE7\xE3o"),i()())}function rt(r,s){if(r&1&&(t(0,"tbody"),F(1,at,26,20,"tr",43,V,!1,nt,3,0,"tr"),i()),r&2){d();let n=he(21);l(),M(n.data)}}function ot(r,s){if(r&1){let n=b();t(0,"app-armamentos-emprestimos-form",57),p("refresh",function(){v(n);let e=d();return x(e.refresh())}),i()}}function mt(r,s){if(r&1){let n=b();t(0,"button",61),p("click",function(){v(n);let e=d(2);return x(e.cadarmamento=!0)}),h(1,"i",42),i()}}function st(r,s){if(r&1){let n=b();t(0,"app-armamentos-emprestimos-itens-form",62),p("refresh",function(){v(n);let e=d(2);return x(e.refreshArms())})("cancel",function(){v(n);let e=d(2);return x(e.cancelArm())}),i()}if(r&2){let n=d(2);E("armamento_emprestimo_id",n.armamentoEmprestimo.id)}}function lt(r,s){if(r&1&&o(0),r&2){let n=d().$implicit;c(n.armamento.modelo.marca.nome)}}function dt(r,s){if(r&1){let n=b();t(0,"i",64),p("click",function(){v(n);let e=d().$implicit,m=d(2);return x(m.rmvArmamento(e.id||0))}),i()}}function ct(r,s){if(r&1&&(t(0,"tr")(1,"td"),o(2),i(),t(3,"td"),o(4),i(),t(5,"td"),C(6,lt,1,1),i(),t(7,"td"),o(8),i(),t(9,"td"),o(10),i(),t(11,"td"),o(12),i(),t(13,"td"),o(14),i(),t(15,"td"),o(16),i(),t(17,"td"),o(18),i(),t(19,"td"),C(20,dt,1,0,"i",63),i()()),r&2){let n=s.$implicit,a=d(2);l(2),c(n.id),l(2),c(n.armamento.armamento_tipo.nome),l(2),u(6,n.armamento.modelo.marca?6:-1),l(2),c(n.armamento.modelo.nome),l(2),c(n.armamento.armamento_calibre==null?null:n.armamento.armamento_calibre.nome),l(2),c(n.armamento.armamento_tamanho==null?null:n.armamento.armamento_tamanho.nome),l(2),c(n.armamento.serial),l(2),c(n.quantidade),l(2),c(n.quantidade_devolucao),l(2),u(20,!a.armamentoEmprestimo.data_devolucao&&a.user.perfil.armamentos_emprestimos_edt?20:-1)}}function pt(r,s){if(r&1&&(t(0,"div",30)(1,"div",31)(2,"h4",32),o(3," Armamentos "),C(4,mt,2,0,"button",58),i(),t(5,"button",33)(6,"span",34),o(7,"\xD7"),i()()(),t(8,"div",35),C(9,st,1,1,"app-armamentos-emprestimos-itens-form",59),t(10,"table",60)(11,"thead")(12,"tr")(13,"th"),o(14,"#"),i(),t(15,"th"),o(16,"Tipo"),i(),t(17,"th"),o(18,"Marca"),i(),t(19,"th"),o(20,"Modelo"),i(),t(21,"th"),o(22,"Calibre"),i(),t(23,"th"),o(24,"Tamanho"),i(),t(25,"th"),o(26,"Serial"),i(),t(27,"th"),o(28,"Quantidade"),i(),t(29,"th"),o(30,"Quant. Devolvido"),i(),t(31,"th"),o(32,"Op\xE7\xF5es"),i()()(),t(33,"tbody"),F(34,ct,21,10,"tr",null,V),i()()()()),r&2){let n=d();l(4),u(4,!n.armamentoEmprestimo.data_devolucao&&n.user.perfil.armamentos_emprestimos_edt?4:-1),l(5),u(9,n.cadarmamento?9:-1),l(25),M(n.armamentoEmprestimo.armamentos_emprestimos_itens)}}function ut(r,s){if(r&1){let n=b();t(0,"app-armamentos-emprestimos-form-receber",65),p("refresh",function(){v(n);let e=d();return x(e.refresh())}),i()}if(r&2){let n=d();E("armamentoEmprestimo",n.armamentoEmprestimo)}}function _t(r,s){if(r&1){let n=b();o(0," Tem certeza que deseja excluir: "),t(1,"b"),o(2),i(),t(3,"div",66)(4,"a",67),o(5,"Cancelar"),i(),t(6,"button",68),p("click",function(){v(n);let e=d();return x(e.confirm())}),o(7," Excluir "),i()()}if(r&2){let n=d();l(2),c(n.excluir.policial.nome)}}var di=(()=>{let s=class s{constructor(a,e,m,_){this.armamentosEmprestimosService=a,this.armamentosEmprestimosItensService=e,this.toastr=m,this.sessionService=_,this.quant=10,this.cadastrando=!1,this.cadarmamento=!1}ngOnInit(){this.user=this.sessionService.getUser(),this.sessionService.checkPermission("armamentos_emprestimos"),this.subscription=this.armamentosEmprestimosService.index().subscribe({next:a=>{this.data$=a,this.temp=a}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}refresh(){this.armamentosEmprestimosService.index().subscribe({next:a=>{this.data$=a}})}editar(a){this.cadastrando=!1,setTimeout(()=>{this.cadastrando=!0},100),setTimeout(()=>{this.child.editar(a)},200)}cadastrar(){this.cadastrando=!1,setTimeout(()=>{this.cadastrando=!0},100),setTimeout(()=>{this.child.reset()},200)}delete(a){this.excluir=a}confirm(){this.armamentosEmprestimosService.remove(this.excluir.id||0).subscribe({next:a=>{this.toastr.success("Exclus\xE3o realizada com sucesso!"),this.refresh()},error:a=>{this.toastr.error("Erro ao excluir, tente novamente mais tarde!")}})}pesquisar(){if(this.data$=this.temp,this.pesquisa.length>0){var a=this.pesquisa.toLocaleLowerCase();this.data$=this.data$.filter(e=>e.policial.numeral?e.policial.numeral.toLocaleLowerCase().indexOf(a)!==-1||e.policial.nome.toLocaleLowerCase().indexOf(a)!==-1||e.policial.nome_guerra.toLocaleLowerCase().indexOf(a)!==-1||e.policial.matricula.toLocaleLowerCase().indexOf(a)!==-1||e.policial.graduacao.nome.toLocaleLowerCase().indexOf(a)!==-1||!a:e.policial.nome.toLocaleLowerCase().indexOf(a)!==-1||e.policial.nome_guerra.toLocaleLowerCase().indexOf(a)!==-1||e.policial.matricula.toLocaleLowerCase().indexOf(a)!==-1||e.policial.graduacao.nome.toLocaleLowerCase().indexOf(a)!==-1||!a)}}showArms(a){this.cadarmamento=!1,this.armamentosEmprestimosService.find(a.id||0).subscribe({next:e=>{this.armamentoEmprestimo=e}})}refreshArms(){this.cadarmamento=!1,this.armamentosEmprestimosService.find(this.armamentoEmprestimo.id||0).subscribe({next:a=>{this.armamentoEmprestimo=a}})}rmvArmamento(a){window.confirm("Tem certeza que deseja excluir o armamento?")&&this.armamentosEmprestimosItensService.remove(a).subscribe({next:e=>{this.armamentosEmprestimosService.find(this.armamentoEmprestimo.id||0).subscribe({next:m=>{this.armamentoEmprestimo=m}})}})}cancelArm(){this.cadarmamento=!1}devolver(a){this.armamentosEmprestimosService.find(a.id||0).subscribe({next:e=>{this.armamentoEmprestimo=e}})}};s.\u0275fac=function(e){return new(e||s)(f(B),f(ie),f(T),f(K))},s.\u0275cmp=y({type:s,selectors:[["app-armamentos-emprestimos"]],viewQuery:function(e,m){if(e&1&&(H(de,5),H(pe,5),H(ce,5)),e&2){let _;J(_=U())&&(m.child=_.first),J(_=U())&&(m.childreceber=_.first),J(_=U())&&(m.childarmamento=_.first)}},standalone:!0,features:[xe([ke()]),w],decls:94,vars:12,consts:[["mf","mfDataTable"],[1,"content-wrapper"],["titulo","Empr\xE9stimos de Armamentos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary"],[1,"card-tools"],[1,"input-group","input-group-sm",2,"width","250px"],[1,"form-control","float-right",2,"width","50px",3,"ngModelChange","ngModel"],["value","10"],["value","25"],["value","50"],["value","100"],["type","text","name","table_search","placeholder","Pesquisar...",1,"form-control","float-right",2,"width","200px",3,"ngModelChange","ngModel"],[1,"card-body","table-responsive","p-1"],[1,"table","table-hover","table-head-fixed","text-nowrap",3,"mfData","mfRowsOnPage","mfSortBy","mfSortOrder"],["by","id"],["by","subunidade.abreviatura"],["by","policial.graduacao.nome"],["by","policial.numeral"],["by","policial.nome_guerra"],["by","policial.matricula"],["by","data_emprestimo"],["by","data_devolucao"],["colspan","100%"],[2,"display","flex","align-items","center","justify-content","center"],["id","modalcad","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["id","modalarm","aria-hidden","true",1,"modal","fade",2,"display","none"],["id","modaldev","aria-hidden","true",1,"modal","fade",2,"display","none"],[3,"armamentoEmprestimo"],["id","modaldel","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],["data-bs-toggle","modal","data-bs-target","#modalcad","title","Cadastrar",1,"btn","btn-outline-primary",3,"click"],[1,"fa","fa-plus"],[1,"optionshover"],["data-bs-toggle","modal","data-bs-target","#modalarm",1,"btn","btn-xs","btn-outline-primary",3,"click"],["title","Imprimir Justificativa","target","_blank",1,"options","point",3,"routerLink"],["title","Imprimir Cautela","target","_blank",1,"options","point",3,"routerLink"],["title","Devolver","data-bs-toggle","modal","data-bs-target","#modaldev",1,"options","point","ml-1"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point","ml-1"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point","ml-1"],["aria-hidden","true",1,"fa","fa-print","text-primary"],["title","Devolver","data-bs-toggle","modal","data-bs-target","#modaldev",1,"options","point","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-download","text-primary"],["title","Editar","data-bs-toggle","modal","data-bs-target","#modalcad",1,"options","point","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-edit","text-primary"],["title","Excluir","data-bs-toggle","modal","data-bs-target","#modaldel",1,"options","point","ml-1",3,"click"],["aria-hidden","true",1,"fa","fa-trash","text-danger"],[3,"refresh"],["title","Cadastrar",1,"btn","btn-outline-primary"],[3,"armamento_emprestimo_id"],[1,"table","table-hover","table-head-fixed","text-nowrap"],["title","Cadastrar",1,"btn","btn-outline-primary",3,"click"],[3,"refresh","cancel","armamento_emprestimo_id"],["aria-hidden","true",1,"fa","fa-trash","text-danger","point"],["aria-hidden","true",1,"fa","fa-trash","text-danger","point",3,"click"],[3,"refresh","armamentoEmprestimo"],[1,"d-flex","justify-content-end"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(e,m){if(e&1){let _=b();t(0,"div",1),h(1,"app-title",2),t(2,"section",3)(3,"div",4)(4,"div",5)(5,"h3",6),C(6,Ue,2,0,"button",7),i(),t(7,"div",8)(8,"div",9)(9,"select",10),oe("ngModelChange",function(g){return v(_),re(m.quant,g)||(m.quant=g),x(g)}),t(10,"option",11),o(11,"10"),i(),t(12,"option",12),o(13,"25"),i(),t(14,"option",13),o(15,"50"),i(),t(16,"option",14),o(17,"100"),i()(),t(18,"input",15),oe("ngModelChange",function(g){return v(_),re(m.pesquisa,g)||(m.pesquisa=g),x(g)}),p("ngModelChange",function(){return v(_),x(m.pesquisar())}),i()()()(),t(19,"div",16)(20,"table",17,0)(22,"thead")(23,"tr")(24,"th")(25,"mfDefaultSorter",18),o(26,"#"),i()(),t(27,"th")(28,"mfDefaultSorter",19),o(29,"Subunidade"),i()(),t(30,"th")(31,"mfDefaultSorter",20),o(32,"Gradua\xE7\xE3o"),i()(),t(33,"th")(34,"mfDefaultSorter",21),o(35,"Numeral"),i()(),t(36,"th")(37,"mfDefaultSorter",22),o(38,"Nome Guerra"),i()(),t(39,"th")(40,"mfDefaultSorter",23),o(41,"Matr\xEDcula"),i()(),t(42,"th")(43,"mfDefaultSorter",24),o(44,"Data Emprestimo"),i()(),t(45,"th"),o(46,"Armamentos"),i(),t(47,"th")(48,"mfDefaultSorter",25),o(49,"Data Devolu\xE7\xE3o"),i()(),t(50,"th"),o(51,"Op\xE7\xF5es"),i()()(),C(52,rt,4,1,"tbody"),t(53,"tfoot")(54,"tr")(55,"td",26)(56,"div",27),h(57,"mfBootstrapPaginator"),i()()()()()()()(),t(58,"div",28)(59,"div",29)(60,"div",30)(61,"div",31)(62,"h4",32),o(63,"Cadastrar"),i(),t(64,"button",33)(65,"span",34),o(66,"\xD7"),i()()(),t(67,"div",35),C(68,ot,1,0,"app-armamentos-emprestimos-form"),i()()()(),t(69,"div",36)(70,"div",29),C(71,pt,36,2,"div",30),i()(),t(72,"div",37)(73,"div",29)(74,"div",30)(75,"div",31)(76,"h4",32),o(77," Devolu\xE7\xE3o "),i(),t(78,"button",33)(79,"span",34),o(80,"\xD7"),i()()(),t(81,"div",35),C(82,ut,1,1,"app-armamentos-emprestimos-form-receber",38),i()()()(),t(83,"div",39)(84,"div",40)(85,"div",30)(86,"div",31)(87,"h4",32),o(88,"Excluir"),i(),t(89,"button",33)(90,"span",34),o(91,"\xD7"),i()()(),t(92,"div",35),C(93,_t,8,1),i()()()()()}e&2&&(l(6),u(6,m.user.perfil.armamentos_emprestimos_cad?6:-1),l(3),ne("ngModel",m.quant),l(9),ne("ngModel",m.pesquisa),l(2),E("mfData",m.data$)("mfRowsOnPage",m.quant)("mfSortBy","id")("mfSortOrder","desc"),l(32),u(52,m.data$?52:-1),l(16),u(68,m.cadastrando?68:-1),l(3),u(71,m.armamentoEmprestimo?71:-1),l(11),u(82,m.armamentoEmprestimo?82:-1),l(11),u(93,m.excluir?93:-1))},dependencies:[$,Ee,Fe,de,pe,ce,Ne,Me,qe,De,I,Ae,Ie,ye,$e,A,we,Ve,Se,be]});let r=s;return r})();export{di as ArmamentosEmprestimosComponent};
