import{a as J,b as k}from"./chunk-ZFJQW5KK.js";import{a as K}from"./chunk-C7VTDCYY.js";import"./chunk-A6GCQO25.js";import{h as Q}from"./chunk-NFMIVN66.js";import{d as G}from"./chunk-AICVXWQ6.js";import"./chunk-I3SZ5FME.js";import"./chunk-HYOWEGV7.js";import{a as $}from"./chunk-3HEW5RTP.js";import{b as N}from"./chunk-UKCOEVIY.js";import{a as A,d as O}from"./chunk-HDKAZCIU.js";import{Ca as y,Cb as z,Ea as I,Fa as c,I as w,Ka as V,La as j,Ma as D,O as b,Oa as n,P as h,Pa as s,Qa as C,Ra as R,Sa as M,Xa as P,Ya as U,_ as g,ca as o,cb as p,da as f,eb as x,la as v,na as E,ra as T,rb as q,sa as m,sb as H,ta as L,ua as B,va as F,wa as e,xa as i,ya as _}from"./chunk-OWJSVT4P.js";function X(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"Tipo"),i(),e(3,"a",12),n(4),i()()),a&2){let t=c(2);o(4),s(t.contrato.contrato_tipo.nome)}}function Y(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"Objeto"),i(),e(3,"a",12),n(4),i()()),a&2){let t=c(2);o(4),s(t.contrato.contrato_objeto.nome)}}function Z(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"SACC"),i(),e(3,"a",12),n(4),i()()),a&2){let t=c(2);o(4),s(t.contrato.numero_sacc)}}function tt(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"Empresa"),i(),e(3,"a",12),n(4),i()()),a&2){let t=c(2);o(4),s(t.contrato.empresa.nome)}}function et(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"CNPJ"),i(),e(3,"a",12),n(4),p(5,"mask"),i()()),a&2){let t=c(2);o(4),s(x(5,1,t.contrato.empresa.cnpj,"00.000.000/0000-00"))}}function it(a,d){a&1&&n(0," Sim ")}function nt(a,d){a&1&&n(0," N\xE3o ")}function at(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"Gestor"),i(),e(3,"a",12),n(4),i()()),a&2){let t=c(2);o(4),M(" ",t.contrato.gestor.graduacao.abreviatura," ",t.contrato.gestor.numeral," ",t.contrato.gestor.nome_guerra," ")}}function ot(a,d){if(a&1&&(e(0,"li",11)(1,"b"),n(2,"Fiscal"),i(),e(3,"a",12),n(4),i()()),a&2){let t=c(2);o(4),M(" ",t.contrato.fiscal.graduacao.abreviatura," ",t.contrato.fiscal.numeral," ",t.contrato.fiscal.nome_guerra," ")}}function rt(a,d){if(a&1&&(e(0,"div",24)(1,"div",25)(2,"h5",26),n(3),i(),e(4,"span",27),n(5,"Porcent. de aditivo"),i()()()),a&2){let t=c(2);o(3),C("",t.contrato.porcentagem_aditivado,"%")}}function lt(a,d){if(a&1&&(e(0,"div",23)(1,"div",44)(2,"div",25)(3,"h5",26),n(4),i(),e(5,"span",27),n(6,"Quantidade di\xE1rias"),i()()(),e(7,"div",24)(8,"div",25)(9,"h5",26),n(10),i(),e(11,"span",27),n(12,"Quantidade usadas"),i()()()()),a&2){let t=c(2);o(4),s(t.contrato.quantidade_diarias),o(6),s(t.quantidadeDiariasUtilizadas())}}function dt(a,d){if(a&1&&(e(0,"h5"),n(1,"Observa\xE7\xF5es"),i(),_(2,"div",45)),a&2){let t=c(2);o(2),E("innerHTML",t.contrato.observacoes,g)}}function ct(a,d){if(a&1&&(e(0,"h5"),n(1,"Observa\xE7\xF5es Aditivo"),i(),_(2,"div",45)),a&2){let t=c(2);o(2),E("innerHTML",t.contrato.observacoes_aditivado,g)}}function mt(a,d){if(a&1){let t=y();e(0,"tr",46)(1,"td"),n(2),i(),e(3,"td"),n(4),p(5,"date"),i(),e(6,"td"),n(7),p(8,"mask"),i(),e(9,"td")(10,"i",47),I("click",function(){let l=b(t).$implicit,u=c(2);return h(u.rmvLancamento(l))}),i()()(),e(11,"tr",48)(12,"td",49),_(13,"div",50),i()()}if(a&2){let t=d.$implicit;o(2),s(t.id),o(2),s(x(5,4,t.mes_referencia,"MM/yyyy")),o(3),C("R$ ",x(8,7,t.valor,"separator.2"),""),o(6),E("innerHTML",t.observacoes,g)}}function st(a,d){if(a&1){let t=y();n(0," Tem certeza que deseja excluir o lan\xE7amento do m\xEAs "),e(1,"b"),n(2),p(3,"date"),i(),n(4,"? "),e(5,"div",51)(6,"a",52),n(7,"Cancelar"),i(),e(8,"button",53),I("click",function(){b(t);let l=c(2);return h(l.confirmRmvLancamento(l.rmvlancamento.id||0))}),n(9," Excluir "),i()()}if(a&2){let t=c(2);o(2),s(x(3,1,t.rmvlancamento.mes_referencia,"MM/yyyy"))}}function pt(a,d){if(a&1){let t=y();e(0,"section",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7)(6,"h3",8),n(7),i(),e(8,"p",9)(9,"span"),n(10),i()(),e(11,"ul",10),v(12,X,5,1,"li",11)(13,Y,5,1,"li",11)(14,Z,5,1,"li",11)(15,tt,5,1,"li",11)(16,et,6,4,"li",11),e(17,"li",11)(18,"b"),n(19,"Prorrog\xE1vel"),i(),e(20,"a",12),v(21,it,1,0)(22,nt,1,0),i()(),v(23,at,5,3,"li",11)(24,ot,5,3,"li",11),e(25,"li",11)(26,"b"),n(27,"Subunidade"),i(),e(28,"a",12),n(29),i()()()()()(),e(30,"div",13)(31,"div",6)(32,"div",14)(33,"ul",15)(34,"li",16)(35,"a",17),n(36,"Informa\xE7\xF5es"),i()(),e(37,"li",16)(38,"a",18),n(39,"Lan\xE7amentos"),i()()()(),e(40,"div",19)(41,"div",20)(42,"div",21)(43,"div",22)(44,"h3")(45,"b"),n(46),p(47,"mask"),i()(),e(48,"h4"),n(49,"Valor Global"),i(),e(50,"h4")(51,"span"),n(52),i()()(),e(53,"div",23)(54,"div",24)(55,"div",25)(56,"h5",26),n(57),p(58,"date"),i(),e(59,"span",27),n(60,"Data Inicial"),i()()(),e(61,"div",24)(62,"div",25)(63,"h5",26),n(64),p(65,"date"),i(),e(66,"span",27),n(67,"Data Final"),i()()(),e(68,"div",24)(69,"div",25)(70,"h5",26),n(71),p(72,"mask"),i(),e(73,"span",27),n(74,"Valor Usado"),i()()(),v(75,rt,6,1,"div",24),i(),v(76,lt,13,2,"div",23),e(77,"div",28),v(78,dt,3,1)(79,ct,3,1),i()(),e(80,"div",29)(81,"h3")(82,"button",30),_(83,"i",31),i()(),e(84,"table",32)(85,"thead")(86,"tr")(87,"th"),n(88,"#"),i(),e(89,"th"),n(90,"M\xEAs de Refer\xEAncia"),i(),e(91,"th"),n(92,"Valor"),i(),e(93,"th"),n(94,"Op\xE7\xF5es"),i()()(),e(95,"tbody"),B(96,mt,14,10,null,null,L),i(),e(98,"tfoot")(99,"tr"),_(100,"th")(101,"th"),e(102,"th"),n(103),p(104,"mask"),i(),_(105,"th"),i()()()()()()()()()()(),e(106,"div",33)(107,"div",34)(108,"div",35)(109,"div",36)(110,"h4",37),n(111,"Cadastrar lan\xE7amento"),i(),e(112,"button",38)(113,"span",39),n(114,"\xD7"),i()()(),e(115,"div",40)(116,"app-contratos-lancamentos-form",41),I("refresh",function(){b(t);let l=c();return h(l.refresh())})("cancel",function(){b(t);let l=c();return h(l.closeModal())}),i()()()()(),e(117,"div",42)(118,"div",43)(119,"div",35)(120,"div",36)(121,"h4",37),n(122,"Excluir lan\xE7amento"),i(),e(123,"button",38)(124,"span",39),n(125,"\xD7"),i()()(),e(126,"div",40),v(127,st,10,4),i()()()()}if(a&2){let t=c();o(7),s(t.contrato.numero_contrato),o(2),T("badge ",t.returnCorUsado(),""),o(),C("",t.returnPercentUsado(),"%"),o(2),m(12,t.contrato.contrato_tipo?12:-1),o(),m(13,t.contrato.contrato_objeto?13:-1),o(),m(14,t.contrato.numero_sacc?14:-1),o(),m(15,t.contrato.empresa?15:-1),o(),m(16,t.contrato.empresa?16:-1),o(5),m(21,t.contrato.prorrogavel?21:22),o(2),m(23,t.contrato.gestor?23:-1),o(),m(24,t.contrato.fiscal?24:-1),o(5),R("",t.contrato.subunidade.abreviatura," - ",t.contrato.subunidade.unidade.abreviatura,""),o(17),C("R$ ",x(47,30,t.contrato.valor_global,"separator.2"),""),o(5),T("badge ",t.returnCorUsado(),""),o(),C("",t.returnPercentUsado(),"%"),o(5),s(x(58,33,t.contrato.data_inicial,"dd/MM/yyyy")),o(7),s(x(65,36,t.contrato.data_final,"dd/MM/yyyy")),o(7),C("R$ ",x(72,39,t.contrato.valor_usado,"separator.2"),""),o(4),m(75,t.contrato.porcentagem_aditivado?75:-1),o(),m(76,t.contrato.contrato_tipo.diarias&&t.contrato.quantidade_diarias?76:-1),o(2),m(78,t.contrato.observacoes?78:-1),o(),m(79,t.contrato.observacoes_aditivado?79:-1),o(17),F(t.contrato.contratos_lancamentos),o(7),C("R$ ",x(104,42,t.returnSumLancamentos(),"separator.2"),""),o(13),E("contrato",t.contrato.id||0),o(11),m(127,t.rmvlancamento?127:-1)}}var Tt=(()=>{let d=class d{constructor(r,l,u,S,W){this.contratosService=r,this.contratosLancamentosService=l,this.sessionService=u,this.activatedRoute=S,this.toastr=W}ngOnInit(){this.user=this.sessionService.getUser(),this.sessionService.checkPermission("contratos"),this.id=this.activatedRoute.snapshot.params.id,this.subscription=this.contratosService.find(this.id).subscribe({next:r=>{r||this.sessionService.redirect(),this.contrato=r}})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}refresh(){document.getElementById("closeModalButton").click(),this.subscription2=this.contratosService.find(this.id).subscribe({next:r=>{r||this.sessionService.redirect(),this.contrato=r}})}closeModal(){document.getElementById("closeModalButton").click()}returnPercentUsado(){var r=this.contrato.valor_usado*100/this.contrato.valor_global;return r.toFixed(2)}returnCorUsado(){var r=this.contrato.valor_usado*100/this.contrato.valor_global,l="";return r<50?l="bg-success":r<70?l="bg-warning":l="bg-danger",l}rmvLancamento(r){this.rmvlancamento=r}confirmRmvLancamento(r){this.contratosLancamentosService.remove(r).subscribe({next:l=>{this.contratosService.find(this.contrato.id||0).subscribe({next:u=>{this.contrato=u,this.toastr.success("Exclus\xE3o realizada com sucesso!")}})}})}returnSumLancamentos(){var r=0;return this.contrato.contratos_lancamentos.forEach(l=>{r=Number(r)+Number(l.valor)}),r.toFixed(2)}quantidadeDiariasUtilizadas(){var r=0;return this.contrato.quantidade_diarias&&(r=this.contrato.quantidade_diarias*this.contrato.valor_usado/this.contrato.valor_global),r.toFixed(2)}};d.\u0275fac=function(l){return new(l||d)(f(K),f(J),f(N),f(z),f(Q))},d.\u0275cmp=w({type:d,selectors:[["app-contrato"]],viewQuery:function(l,u){if(l&1&&V(k,5),l&2){let S;j(S=D())&&(u.childlancamento=S.first)}},standalone:!0,features:[P([A()]),U],decls:3,vars:1,consts:[[1,"content-wrapper"],["titulo","Contrato"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-3"],[1,"card"],[1,"card-body","box-profile"],[1,"profile-username","text-center"],[1,"text-muted","text-center"],[1,"list-group","list-group-unbordered","mb-3"],[1,"list-group-item"],[1,"float-right"],[1,"col-md-9"],[1,"card-header","p-2"],[1,"nav","nav-pills"],[1,"nav-item"],["href","#informacoes","data-bs-toggle","tab",1,"nav-link","active"],["href","#lancamentos","data-bs-toggle","tab",1,"nav-link"],[1,"card-body"],[1,"tab-content"],["id","informacoes",1,"active","tab-pane"],[1,"row","text-center","mt-2"],[1,"row","mt-2"],[1,"col-sm-3"],[1,"description-block","border-right"],[1,"description-header"],[1,"description-text"],[1,"text-justify"],["id","lancamentos",1,"tab-pane"],["data-bs-toggle","modal","data-bs-target","#modallancamento","title","Cadastrar lan\xE7amento",1,"btn","btn-sm","btn-outline-primary"],[1,"fa","fa-plus"],[1,"table","table-hover","table-head-fixed","text-wrap"],["id","modallancamento","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header","border-0"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","closeModalButton",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"refresh","cancel","contrato"],["id","modalexcluirlancamento","aria-hidden","true",1,"modal","fade",2,"display","none"],[1,"modal-dialog"],[1,"col-sm-3","offset-sm-3"],[3,"innerHTML"],["data-widget","expandable-table","aria-expanded","false"],["aria-hidden","true","data-bs-toggle","modal","data-bs-target","#modalexcluirlancamento","title","Excluir lan\xE7amento",1,"fa","fa-trash","text-danger","point",3,"click"],[1,"expandable-body","d-none"],["colspan","4"],[1,"text-justify",3,"innerHTML"],[1,"d-flex","justify-content-end","mt-1"],["data-bs-dismiss","modal",1,"btn","btn-link","text-primary"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(l,u){l&1&&(e(0,"div",0),_(1,"app-title",1),v(2,pt,128,45),i()),l&2&&(o(2),m(2,u.contrato?2:-1))},dependencies:[H,q,$,k,O,G]});let a=d;return a})();export{Tt as ContratoComponent};
