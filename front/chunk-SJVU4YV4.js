import{a as Y}from"./chunk-S3XXDZC3.js";import{a as X}from"./chunk-JKRXANFS.js";import{a as W}from"./chunk-P4DI7BWX.js";import{a as J}from"./chunk-I3SZ5FME.js";import"./chunk-HYOWEGV7.js";import{a as Q}from"./chunk-3HEW5RTP.js";import{a as K,b as z}from"./chunk-UKCOEVIY.js";import{a as U}from"./chunk-HDKAZCIU.js";import{$b as q,C as _,Ea as x,F as C,Fa as b,I as E,Mb as w,Oa as i,Pa as l,Qb as j,Ra as I,Rb as B,Tb as O,Vb as L,Wb as G,Xa as T,Ya as $,_ as y,_b as H,ac as A,ca as n,cb as S,da as p,db as F,eb as N,la as v,na as u,pb as P,rb as R,sa as f,sb as V,ta as g,ua as k,va as M,vb as D,wa as e,xa as t,ya as s}from"./chunk-OWJSVT4P.js";var ne=K.url,oe="veiculos",Z=(()=>{let a=class a{constructor(c){this.http=c}relatorio(c){return this.http.post(`${ne}/${oe}/relatorio`,c)}};a.\u0275fac=function(m){return new(m||a)(C(D))},a.\u0275prov=_({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function re(o,a){o&1&&i(0," Org\xE2nico ")}function le(o,a){o&1&&i(0," Locado ")}function de(o,a){if(o&1&&s(0,"div",30),o&2){let r=b().$implicit;u("innerHTML",r.observacoes,y)}}function ce(o,a){if(o&1&&(e(0,"tr",26)(1,"td"),i(2),t(),e(3,"td"),i(4),t(),e(5,"td"),i(6),t(),e(7,"td"),i(8),t(),e(9,"td"),i(10),t(),e(11,"td"),i(12),t(),e(13,"td"),v(14,re,1,0)(15,le,1,0),t(),e(16,"td"),i(17),t(),e(18,"td"),i(19),t(),e(20,"td"),i(21),t(),e(22,"td"),i(23),t(),e(24,"td"),i(25),t(),e(26,"td"),i(27),S(28,"date"),t()(),e(29,"tr",27)(30,"td",28)(31,"div",29),v(32,de,1,1,"div",30),t()()()),o&2){let r=a.$implicit;n(2),l(r.id),n(2),I(" ",r.subunidade.abreviatura," - ",r.subunidade.unidade.abreviatura," "),n(2),l(r.veiculo_tipo.nome),n(2),l(r.modelo.marca.nome),n(2),l(r.modelo.nome),n(2),l(r.cor.nome),n(2),f(14,r.organico?14:15),n(3),l(r.placa),n(2),l(r.placa_especial),n(2),l(r.km_inicial),n(2),l(r.km_atual),n(2),l(r.km_troca_oleo),n(2),l(N(28,15,r.data_baixa,"dd/MM/yyyy")),n(5),f(32,r.observacoes?32:-1)}}function me(o,a){if(o&1&&(e(0,"table",25)(1,"thead")(2,"tr")(3,"th"),i(4,"#"),t(),e(5,"th"),i(6,"Subunidade"),t(),e(7,"th"),i(8,"Tipo"),t(),e(9,"th"),i(10,"Marca"),t(),e(11,"th"),i(12,"Modelo"),t(),e(13,"th"),i(14,"Cor"),t(),e(15,"th"),i(16,"Propriet\xE1rio"),t(),e(17,"th"),i(18,"Placa"),t(),e(19,"th"),i(20,"Placa Especial"),t(),e(21,"th"),i(22,"KM Inicial"),t(),e(23,"th"),i(24,"KM Atual"),t(),e(25,"th"),i(26,"KM Troca de \xD3leo"),t(),e(27,"th"),i(28,"Data Baixa"),t()()(),e(29,"tbody"),k(30,ce,33,18,null,null,g),S(32,"async"),t()()),o&2){let r=b();n(30),M(F(32,0,r.data$))}}var Te=(()=>{let a=class a{constructor(c,m,d,h,ee,te){this.formBuilder=c,this.veiculosRelService=m,this.marcasService=d,this.modelosService=h,this.veiculosTiposService=ee,this.sessionService=te}ngOnInit(){this.sessionService.checkPermission("relatorios"),this.form=this.formBuilder.group({marca:[null],modelo:[null],veiculo_tipo:[null],organico:[null],blindado:[null],locado:[null],data_baixa:[null],subunidade:[null]}),this.marcas$=this.marcasService.marcasTransporte(),this.veiculostipos$=this.veiculosTiposService.index()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.subscription2&&this.subscription2.unsubscribe()}pesquisar(){this.sessionService.getSubunidade()&&this.form.get("subunidade")?.patchValue(this.sessionService.getSubunidade()),this.data$=this.veiculosRelService.relatorio(this.form.value)}getModelos(){this.modelos$=this.modelosService.whereMarca(this.form.value.marca)}};a.\u0275fac=function(m){return new(m||a)(p(H),p(Z),p(W),p(X),p(Y),p(z))},a.\u0275cmp=E({type:a,selectors:[["app-veiculos-rel"]],standalone:!0,features:[T([U()]),$],decls:40,vars:6,consts:[[1,"content-wrapper"],["titulo","Relat\xF3rio de Ve\xEDculos"],[1,"content"],[1,"card"],[1,"card-header","border-0"],[1,"card-title","noprint"],[1,"card-title","print"],[1,"card-body","table-responsive"],[1,"noprint",3,"formGroup"],[1,"row"],["label","Marca","id","marca","formControlName","marca",1,"col-sm-2",3,"ngModelChange","data$"],["label","Modelo","id","modelo","formControlName","modelo",1,"col-sm-2",3,"data$"],["label","Tipo","id","veiculo_tipo","formControlName","veiculo_tipo",1,"col-sm-2",3,"data$"],[1,"col-sm-2"],[1,"form-check"],["type","checkbox","checked","","id","blindado","formControlName","blindado",1,"form-check-input"],["for","blindado",1,"form-check-label"],["type","checkbox","checked","","id","organico","formControlName","organico",1,"form-check-input"],["for","organico",1,"form-check-label"],["type","checkbox","checked","","id","locado","formControlName","locado",1,"form-check-input"],["for","locado",1,"form-check-label"],["type","checkbox","checked","","id","data_baixa","formControlName","data_baixa",1,"form-check-input"],["for","data_baixa",1,"form-check-label"],[1,"row","mt-2"],["type","button",1,"btn","btn-primary","btn-block",3,"click","disabled"],[1,"table","table-hover","table-head-fixed","text-wrap"],["data-widget","expandable-table","aria-expanded","false"],[1,"expandable-body","d-none"],["colspan","7"],[2,"display","none"],[3,"innerHTML"]],template:function(m,d){m&1&&(e(0,"div",0),s(1,"app-title",1),e(2,"section",2)(3,"div",3)(4,"div",4)(5,"h3",5),i(6,"Filtro"),t(),e(7,"h3",6),i(8,"Relat\xF3rio de Ve\xEDculos"),t()(),e(9,"div",7)(10,"form",8)(11,"div",9)(12,"input-select",10),x("ngModelChange",function(){return d.getModelos()}),t(),s(13,"input-select",11)(14,"input-select",12),t(),e(15,"div",9)(16,"div",13)(17,"div",14),s(18,"input",15),e(19,"label",16),i(20,"Blindado"),t()()(),e(21,"div",13)(22,"div",14),s(23,"input",17),e(24,"label",18),i(25,"Org\xE2nico"),t()()(),e(26,"div",13)(27,"div",14),s(28,"input",19),e(29,"label",20),i(30,"Locado"),t()()(),e(31,"div",13)(32,"div",14),s(33,"input",21),e(34,"label",22),i(35,"Data baixa"),t()()()(),e(36,"div",23)(37,"button",24),x("click",function(){return d.pesquisar()}),i(38," Pesquisar "),t()()(),v(39,me,33,2,"table",25),t()()()()),m&2&&(n(10),u("formGroup",d.form),n(2),u("data$",d.marcas$),n(),u("data$",d.modelos$),n(),u("data$",d.veiculostipos$),n(23),u("disabled",d.form.invalid),n(2),f(39,d.data$?39:-1))},dependencies:[V,P,R,Q,q,O,w,j,B,A,L,G,J],styles:[".print[_ngcontent-%COMP%]{display:none}@media print{.noprint[_ngcontent-%COMP%]{display:none}.print[_ngcontent-%COMP%]{display:block}}"]});let o=a;return o})();export{Te as VeiculosRelComponent};
